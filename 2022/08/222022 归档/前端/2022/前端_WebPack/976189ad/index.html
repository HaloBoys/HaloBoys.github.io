<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>WebPack | 庆生的第二大脑</title><meta name="keywords" content="庆生的第二大脑"><meta name="author" content="曾庆生"><meta name="copyright" content="曾庆生"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="前言官方文档：https:&#x2F;&#x2F;www.webpackjs.com参考文档：http:&#x2F;&#x2F;xxpromise.gitee.io&#x2F;webpack5-docs 为什么需要打包工具？开发时，我们会使用框架（React、Vue),ES6模块化语法，Less&#x2F;Sass等cs预处理器等语法进行开发。这样的代码要想在浏览器运行必须经过编译成浏览器能识别的JS、Css等语法，才能运行。所以我们需要打包工具帮我们做完">
<meta property="og:type" content="article">
<meta property="og:title" content="WebPack">
<meta property="og:url" content="https://haloboys.github.io/2022/08/222022%20%E5%BD%92%E6%A1%A3/%E5%89%8D%E7%AB%AF/2022/%E5%89%8D%E7%AB%AF_WebPack/976189ad/index.html">
<meta property="og:site_name" content="庆生的第二大脑">
<meta property="og:description" content="前言官方文档：https:&#x2F;&#x2F;www.webpackjs.com参考文档：http:&#x2F;&#x2F;xxpromise.gitee.io&#x2F;webpack5-docs 为什么需要打包工具？开发时，我们会使用框架（React、Vue),ES6模块化语法，Less&#x2F;Sass等cs预处理器等语法进行开发。这样的代码要想在浏览器运行必须经过编译成浏览器能识别的JS、Css等语法，才能运行。所以我们需要打包工具帮我们做完">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/HaloBoys/PicGoMyDevice/img/WebPack.jpg">
<meta property="article:published_time" content="2022-08-22T04:15:49.000Z">
<meta property="article:modified_time" content="2023-11-24T09:46:06.617Z">
<meta property="article:author" content="曾庆生">
<meta property="article:tag" content="庆生的第二大脑">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/HaloBoys/PicGoMyDevice/img/WebPack.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://haloboys.github.io/2022/08/222022%20%E5%BD%92%E6%A1%A3/%E5%89%8D%E7%AB%AF/2022/%E5%89%8D%E7%AB%AF_WebPack/976189ad/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-2TB604K6W6"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-2TB604K6W6');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"没有查询到关键词：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"已切换为繁体","cht_to_chs":"已切换为简体","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#3b4252","bgDark":"#00c4b6","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'WebPack',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-11-24 17:46:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/scrollbar.css"><script src="https://cdn.jsdelivr.net/npm/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/89033762?v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">84</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">39</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">庆生的第二大脑</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">WebPack</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-22T04:15:49.000Z" title="发表于 2022-08-22 12:15:49">2022-08-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-24T09:46:06.617Z" title="更新于 2023-11-24 17:46:06">2023-11-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/WebPack/">WebPack</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>22分钟</span></span></div></div></div><article class="post-content" id="article-container"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>官方文档：<a target="_blank" rel="noopener" href="https://www.webpackjs.com">https://www.webpackjs.com</a><br>参考文档：<a target="_blank" rel="noopener" href="http://xxpromise.gitee.io/webpack5-docs">http://xxpromise.gitee.io/webpack5-docs</a></p>
<h2 id="为什么需要打包工具？"><a href="#为什么需要打包工具？" class="headerlink" title="为什么需要打包工具？"></a>为什么需要打包工具？</h2><p>开发时，我们会使用框架（React、Vue),ES6模块化语法，Less/Sass等cs预处理器等语法进行开发。这样的代码要想在浏览器运行<strong>必须经过编译成浏览器能识别的JS、Css等语法</strong>，才能运行。所以我们需要打包工具帮我们做完这些事。除此之外，打包工具还能<strong>压缩代码、做兼容性处理、提升代码性能</strong>等。</p>
<h2 id="有哪些打包工具？"><a href="#有哪些打包工具？" class="headerlink" title="有哪些打包工具？"></a>有哪些打包工具？</h2><ul>
<li>Grunt</li>
<li>Gulp</li>
<li>Parcel</li>
<li>Webpack</li>
<li>Rollup</li>
<li>Vite</li>
<li>…</li>
</ul>
<h2 id="Webpack-介绍与快速开始"><a href="#Webpack-介绍与快速开始" class="headerlink" title="Webpack 介绍与快速开始"></a>Webpack 介绍与快速开始</h2><p>Webpack是一个静态资源打包工具。它会以一个或多个文件作为打包的入口，将我们整个项目所有文件编译组合成一个或多个文件输出出去。<br>Webpack输出的文件叫做 <code>bundle</code></p>
<p>WebPack 安装：<a target="_blank" rel="noopener" href="https://www.webpackjs.com/guides/installation/">https://www.webpackjs.com/guides/installation/</a></p>
<ol>
<li>项目根目录运行 <code>npm init -y</code> 初始化 <code>package.json</code> 文件</li>
<li><code>npm install --save-dev webpack</code></li>
<li><code>npm install --save-dev webpack-cli</code> 【 webpack 4+ 版本，需要安装 CLI】</li>
<li>执行 <code>npx webpack ./src/main.js --mode=[development/production]</code></li>
</ol>
<h1 id="五大概念"><a href="#五大概念" class="headerlink" title="五大概念"></a>五大概念</h1><h2 id="entry-入口）"><a href="#entry-入口）" class="headerlink" title="entry(入口）"></a>entry(入口）</h2><p>指示Webpack从哪个文件开始打包</p>
<h2 id="output-输出）"><a href="#output-输出）" class="headerlink" title="output(输出）"></a>output(输出）</h2><p>指示Webpack打包完的文件输出到哪里去，如何命名等</p>
<h2 id="loader-加载器）"><a href="#loader-加载器）" class="headerlink" title="loader(加载器）"></a>loader(加载器）</h2><p>Webpack本身只能处理 <code>js、json</code> 等资源，其他资源需要借助 loader, Webpack才能解析</p>
<h2 id="plugins-插件）"><a href="#plugins-插件）" class="headerlink" title="plugins(插件）"></a>plugins(插件）</h2><p>扩展Webpack的功能</p>
<h2 id="mode-模式）"><a href="#mode-模式）" class="headerlink" title="mode(模式）"></a>mode(模式）</h2><h3 id="mode-development"><a href="#mode-development" class="headerlink" title="mode: development"></a>mode: development</h3><p>开发模式主要做两件事：</p>
<ol>
<li>编译代码，使浏览器能识别运行<br>开发时我们有样式资源、字体图标、图片资源、html资源等，webpack默认都不能处理这些资源，所以我们要<strong>加载配置</strong>来编译这些资源</li>
<li>代码质量检查，树立代码规范<br>提前检查代码的一些隐患，让代码运行时能更加健壮。<br>提前检查代码规范和格式，统一团队编码风格，让代码更优雅美观。</li>
</ol>
<h3 id="mode-production"><a href="#mode-production" class="headerlink" title="mode: production"></a>mode: production</h3><p>生产模式是开发完成代码后，生成代码将来部署上线。这个模式下我们主要对代码进行优化，让其运行性能更好。</p>
<p>主要从两个角度出发:</p>
<ol>
<li>优化代码运行性能</li>
<li>优化代码打包速度</li>
</ol>
<h3 id="模式配置"><a href="#模式配置" class="headerlink" title="模式配置"></a>模式配置</h3><h4 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h4><p>需要分别准备两个配置文件来放不同的配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">├── webpack (项目根目录)</span><br><span class="line">    ├── config (Webpack配置文件目录)</span><br><span class="line">    │    ├── webpack.dev.js(开发模式配置文件)</span><br><span class="line">    │    └── webpack.prod.js(生产模式配置文件)</span><br></pre></td></tr></table></figure>
<h4 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack --config ./config/webpack.prod.js</span><br></pre></td></tr></table></figure>
<h4 id="配置运行指令"><a href="#配置运行指令" class="headerlink" title="配置运行指令"></a>配置运行指令</h4><p>为了方便运行不同模式的指令，可以将指令定义在 <code>package.json</code> 中 <code>scripts</code> 里面</p>
<p>快捷启动指令：</p>
<ul>
<li>开发模式：npm start 或 npm run dev</li>
<li>生产模式：npm run build</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack serve --config ./config/webpack.dev.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack --config ./config/webpack.prod.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="配置-configuration"><a href="#配置-configuration" class="headerlink" title="配置(configuration)"></a>配置(configuration)</h1><h2 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h2><p>在项目根目录下新建文件：<strong>webpack.config.js</strong></p>
<p>配置完成后直接在终端运行：<code>npx webpack</code> 即可，它会找到 webpack.config.js 文件中的入口进行打包</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">   <span class="comment">// 入口</span></span><br><span class="line">   <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">   <span class="comment">// 输出</span></span><br><span class="line">   <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">// 绝对路径</span></span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;foo.bundle.js&#x27;</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// 加载器</span></span><br><span class="line">   <span class="attr">module</span>: &#123;</span><br><span class="line">      <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">// 模块规则（配置 loader、解析器等选项）</span></span><br><span class="line">    ],</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// 插件</span></span><br><span class="line">   <span class="attr">plugins</span>: [</span><br><span class="line">     <span class="comment">//...</span></span><br><span class="line">   ],</span><br><span class="line">   <span class="comment">// 模式</span></span><br><span class="line">   <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="入口文件打包输出文件名"><a href="#入口文件打包输出文件名" class="headerlink" title="入口文件打包输出文件名"></a>入口文件打包输出文件名</h2><p>默认所有文件都是打包在一个目录中，显得结构非常乱，可以配置不同文件的打包路径</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">```javascript</span><br><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">   // 入口</span><br><span class="line">   entry: &#x27;./src/main.js&#x27;,</span><br><span class="line">   // 输出</span><br><span class="line">   output: &#123;</span><br><span class="line">    // 绝对路径</span><br><span class="line">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line"><span class="deletion">-    filename: &#x27;foo.bundle.js&#x27;</span></span><br><span class="line"><span class="addition">+    filename: &#x27;static/js/foo.bundle.js&#x27;</span></span><br><span class="line">   &#125;,</span><br><span class="line">   // 加载器</span><br><span class="line">   module: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">    # 如图片静态资源</span><br><span class="line"><span class="addition">+   &#123;</span></span><br><span class="line"><span class="addition">+       test:/\.(png|jpe?g|gif|webp|svg)$/,</span></span><br><span class="line"><span class="addition">+       type:&quot;asset&quot;,</span></span><br><span class="line"><span class="addition">+       parser:&#123;</span></span><br><span class="line"><span class="addition">+           dataUr1Condition:&#123;</span></span><br><span class="line"><span class="addition">+           # 小于10kb的图片转base64</span></span><br><span class="line"><span class="addition">+           # 优点：减少请求数量缺点：体积会更大</span></span><br><span class="line"><span class="addition">+           maxSize:10*1024,//10kb</span></span><br><span class="line"><span class="addition">+           &#125;,</span></span><br><span class="line"><span class="addition">+       &#125;,</span></span><br><span class="line"><span class="addition">+   &#125;,</span></span><br><span class="line"><span class="addition">+    generator: &#123;</span></span><br><span class="line"><span class="addition">+       # 输出图片名称及路径</span></span><br><span class="line"><span class="addition">+       # [hash:10] hash 值取前 10 位</span></span><br><span class="line"><span class="addition">+       filename: &#x27;static/images/[hash:10][ext][query]&#x27;,</span></span><br><span class="line"><span class="addition">+    &#125;,</span></span><br><span class="line">    ],</span><br><span class="line">   &#125;,</span><br><span class="line">   // 插件</span><br><span class="line">   plugins: [</span><br><span class="line">     //...</span><br><span class="line">   ],</span><br><span class="line">   // 模式</span><br><span class="line">   mode: &#x27;development&#x27;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="自动清空上次打包内容"><a href="#自动清空上次打包内容" class="headerlink" title="自动清空上次打包内容"></a>自动清空上次打包内容</h2><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">   output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line">    filename: &#x27;static/js/foo.bundle.js&#x27;,</span><br><span class="line"><span class="addition">+   # 原理：在打包前，将path整个目录内容清空，再进行打包</span></span><br><span class="line"><span class="addition">+   clean: true,</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h1><p>文档：<a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/">https://www.webpackjs.com/loaders/</a></p>
<p>如果遇到 webpack 不能处理的资源，都需要找到对应的 loader 对其进行转换。</p>
<h2 id="使用-loader"><a href="#使用-loader" class="headerlink" title="使用 loader"></a>使用 loader</h2><p>有<strong>三种</strong>使用 loader 的方式：</p>
<h3 id="配置（推荐）"><a href="#配置（推荐）" class="headerlink" title="配置（推荐）"></a>配置（推荐）</h3><p>在 webpack.config.js 文件中指定 loader</p>
<p><strong>module.rules</strong> 允许在 webpack 配置中指定多个 loader：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">&#x27;style-loader&#x27;</span> &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">modules</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="内联"><a href="#内联" class="headerlink" title="内联"></a>内联</h3><p>见文档</p>
<h3 id="CLI"><a href="#CLI" class="headerlink" title="CLI"></a>CLI</h3><p>见文档</p>
<h2 id="loader-特性"><a href="#loader-特性" class="headerlink" title="loader 特性"></a>loader 特性</h2><ol>
<li>loader 支持链式传递。能够对资源使用流水线(pipeline)。<strong>多个 loader 执行顺序：从右到左</strong>。loader 链中的第一个 loader 返回值给下一个 loader。在最后一个 loader，返回 webpack 所预期的 JavaScript。</li>
<li>loader 可以是同步的，也可以是异步的。</li>
<li>loader 运行在 Node.js 中，并且能够执行任何可能的操作。</li>
<li>loader 接收查询参数。用于对 loader 传递配置。</li>
<li>loader 也能够使用 options 对象进行配置。</li>
<li>除了使用 package.json 常见的 main 属性，还可以将普通的 npm 模块导出为 loader，做法是在 package.json 里定义一个 loader 字段。</li>
<li>插件(plugin)可以为 loader 带来更多特性。</li>
<li>loader 能够产生额外的任意文件。</li>
</ol>
<h2 id="处理样式资源"><a href="#处理样式资源" class="headerlink" title="处理样式资源"></a>处理样式资源</h2><p>Webpack本身是不能识别样式资源的，所以我们需要借助 Loader 来处理 <strong>Css、Less、Sass、Scss、Styl</strong> 样式资源</p>
<h3 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev css-loader</span><br><span class="line">npm install --save-dev style-loader</span><br></pre></td></tr></table></figure>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>webpack.config.js</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  module: &#123;</span><br><span class="line"><span class="addition">+    rules: [</span></span><br><span class="line"><span class="addition">+      &#123;</span></span><br><span class="line"><span class="addition">+        test: /\.css$/,</span></span><br><span class="line">        #  注意执行顺序是从后往前</span><br><span class="line"><span class="addition">+        use: [ &#x27;style-loader&#x27;, &#x27;css-loader&#x27; ]</span></span><br><span class="line"><span class="addition">+      &#125;</span></span><br><span class="line"><span class="addition">+    ]</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="less-loader"><a href="#less-loader" class="headerlink" title="less-loader"></a>less-loader</h3><p>less-loader：<a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/less-loader/">https://www.webpackjs.com/loaders/less-loader/</a></p>
<h3 id="sass-loader"><a href="#sass-loader" class="headerlink" title="sass-loader"></a>sass-loader</h3><p>sass-loader：<a target="_blank" rel="noopener" href="https://www.webpackjs.com/loaders/sass-loader/">https://www.webpackjs.com/loaders/sass-loader/</a></p>
<h2 id="处理图片资源"><a href="#处理图片资源" class="headerlink" title="处理图片资源"></a>处理图片资源</h2><p>过去在Webpack4时，我们处理图片资源通过 <code>file-loader</code> 和 <code>url-loader</code> 进行处理<br>现在Webpack5已经将两个Loader功能内置到Webpack里了，我们只需要简单配置即可处理图片资源</p>
<p>拓展：</p>
<p>一般<strong>体积较小的图片会将其转换为 base64 格式</strong>，优点：减少请求数量缺点：体积会更大</p>
<p>webpack.config.js:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    // 加载器</span><br><span class="line">    module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      // 模块规则（配置 loader、解析器等选项）</span><br><span class="line"><span class="addition">+   &#123;</span></span><br><span class="line"><span class="addition">+       test:/\.(png|jpe?g|gif|webp|svg)$/,</span></span><br><span class="line"><span class="addition">+       type:&quot;asset&quot;,</span></span><br><span class="line"><span class="addition">+       parser:&#123;</span></span><br><span class="line"><span class="addition">+           dataUr1Condition:&#123;</span></span><br><span class="line"><span class="addition">+           # 小于10kb的图片转base64</span></span><br><span class="line"><span class="addition">+           # 优点：减少请求数量缺点：体积会更大</span></span><br><span class="line"><span class="addition">+           maxSize:10*1024,//10kb</span></span><br><span class="line"><span class="addition">+           &#125;,</span></span><br><span class="line"><span class="addition">+       &#125;,</span></span><br><span class="line"><span class="addition">+   &#125;,</span></span><br><span class="line"><span class="addition">+    generator: &#123;</span></span><br><span class="line"><span class="addition">+       # 输出图片名称及路径</span></span><br><span class="line"><span class="addition">+       # [hash:10] hash 值取前 10 位</span></span><br><span class="line"><span class="addition">+       filename: &#x27;static/images/[hash:10][ext][query]&#x27;,</span></span><br><span class="line"><span class="addition">+    &#125;,</span></span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="处理字体图标资源和其他资源"><a href="#处理字体图标资源和其他资源" class="headerlink" title="处理字体图标资源和其他资源"></a>处理字体图标资源和其他资源</h2><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        # `type: &quot;asset/resource&quot;` 和 `type: &quot;asset&quot;`的区别：</span><br><span class="line">        # 1. `type: &quot;asset/resource&quot;` 相当于`file-loader`, 将文件转化成 Webpack 能识别的资源，其他不做处理</span><br><span class="line">        # 2. `type: &quot;asset&quot;` 相当于`url-loader`, 将文件转化成 Webpack 能识别的资源，同时小于某个大小的资源会处理成 data URI 形式</span><br><span class="line"><span class="addition">+      &#123;</span></span><br><span class="line"><span class="addition">+        test: /\.(ttf|woff2?|map4|map3|avi)$/,</span></span><br><span class="line"><span class="addition">+        type: &quot;asset/resource&quot;,</span></span><br><span class="line"><span class="addition">+        generator: &#123;</span></span><br><span class="line"><span class="addition">+          filename: &quot;static/media/[hash:8][ext][query]&quot;,</span></span><br><span class="line"><span class="addition">+        &#125;,</span></span><br><span class="line"><span class="addition">+      &#125;,</span></span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="处理-js-资源"><a href="#处理-js-资源" class="headerlink" title="处理 js 资源"></a>处理 js 资源</h2><blockquote>
<ol>
<li>团队对代码格式是有严格要求的，我们不能由肉眼去检测代码格式，需要使用专业的工具（<code>Eslint</code>）来检测。</li>
<li>Webpack 对 js 处理是有限的，只能编译 js 中 ES 模块化语法，不能编译其他语法，导致 js 不能在低版本浏览器中运行。（<code>Babel</code>）</li>
</ol>
</blockquote>
<h3 id="Eslint-（代码格式）"><a href="#Eslint-（代码格式）" class="headerlink" title="Eslint （代码格式）"></a>Eslint （代码格式）</h3><p>参考：<a target="_blank" rel="noopener" href="http://xxpromise.gitee.io/webpack5-docs/base/javascript.html#eslint">http://xxpromise.gitee.io/webpack5-docs/base/javascript.html#eslint</a></p>
<h4 id="在-Webpack-中使用"><a href="#在-Webpack-中使用" class="headerlink" title="在 Webpack 中使用"></a>在 Webpack 中使用</h4><h5 id="下载包"><a href="#下载包" class="headerlink" title="下载包"></a>下载包</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint-webpack-plugin eslint -D</span><br></pre></td></tr></table></figure>
<h5 id="创建-eslintrc-js-配置文件"><a href="#创建-eslintrc-js-配置文件" class="headerlink" title="创建.eslintrc.js 配置文件"></a>创建.eslintrc.js 配置文件</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 继承 Eslint 规则</span></span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">// 启用node中全局变量</span></span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">// 启用浏览器中全局变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span>, <span class="comment">// 不能使用 var 定义变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h5><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;);</span></span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line"><span class="addition">+    new ESLintWebpackPlugin(&#123;</span></span><br><span class="line"><span class="addition">+      # 指定检查文件的根目录</span></span><br><span class="line"><span class="addition">+      context: path.resolve(__dirname, &quot;src&quot;),</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h5><p>推荐在 vscode 中安装 Eslint 插件，即可不用编译就能看到错误，可以提前解决。<br>但是此时就会对项目<strong>所有文件</strong>默认进行 Eslint 检查了，dist 目录下的打包后文件就会报错。<br>但是我们<strong>只需要检查 src 下面的文件</strong>，不需要检查 dist 下面的文件。所以可以使用 <strong>Eslint 忽略文件</strong>解决。<br>在项目根目录新建 <code>.eslintignore</code> 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 忽略dist目录下所有文件</span><br><span class="line">dist</span><br></pre></td></tr></table></figure>
<h3 id="Babel-（兼容性处理）"><a href="#Babel-（兼容性处理）" class="headerlink" title="Babel （兼容性处理）"></a>Babel （兼容性处理）</h3><p>参考：<a target="_blank" rel="noopener" href="http://xxpromise.gitee.io/webpack5-docs/base/javascript.html#babel">http://xxpromise.gitee.io/webpack5-docs/base/javascript.html#babel</a></p>
<h2 id="处理-Html-资源"><a href="#处理-Html-资源" class="headerlink" title="处理 Html 资源"></a>处理 Html 资源</h2><p>默认 html 中需要我们手动地去引入打包好的资源，随着项目复杂程度越来越高，手动引入效率低，容易出错。webpack 中可以通过插件来自动引入。</p>
<h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i html-webpack-plugin -D</span><br></pre></td></tr></table></figure>
<h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h3><p>webpack.config.js</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</span></span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line"><span class="addition">+    new HtmlWebpackPlugin(&#123;</span></span><br><span class="line"><span class="addition">+      # 以 public/index.html 为模板创建文件</span></span><br><span class="line"><span class="addition">+      # 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span></span><br><span class="line"><span class="addition">+      template: path.resolve(__dirname, &quot;public/index.html&quot;),</span></span><br><span class="line"><span class="addition">+    &#125;),</span></span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="自动化（devServer）"><a href="#自动化（devServer）" class="headerlink" title="自动化（devServer）"></a>自动化（devServer）</h1><p>每次改完源代码都需要手动输入指令才能编译代码，效率低。可以通过 <code>webpack-dev-server</code> 实现自动化编译。所有代码都会在<strong>内存中编译打包</strong>，并不会输出到 dist 目录下</p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server -D</span><br></pre></td></tr></table></figure>
<h2 id="配置-2"><a href="#配置-2" class="headerlink" title="配置"></a>配置</h2><p>webpack.config.js</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // 开发服务器（不会输出资源，在内存中编译打包的）</span><br><span class="line"><span class="addition">+  devServer: &#123;</span></span><br><span class="line"><span class="addition">+    host: &quot;localhost&quot;, // 启动服务器域名</span></span><br><span class="line"><span class="addition">+    port: &quot;3000&quot;, // 启动服务器端口号</span></span><br><span class="line"><span class="addition">+    open: true, // 是否自动打开浏览器</span></span><br><span class="line"><span class="addition">+  &#125;,</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="运行指令"><a href="#运行指令" class="headerlink" title="运行指令"></a>运行指令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack serve</span><br></pre></td></tr></table></figure>
<h1 id="Css-处理"><a href="#Css-处理" class="headerlink" title="Css 处理"></a>Css 处理</h1><h2 id="提取-Css-成单独文件"><a href="#提取-Css-成单独文件" class="headerlink" title="提取 Css 成单独文件"></a>提取 Css 成单独文件</h2><p>Css 文件目前被打包到 js 文件中，当 js 文件加载时，会创建一个 style 标签来生成样式。这样对于网站来说，会出现<strong>闪屏现象</strong>，用户体验不好，我们应该是单独的 Css 文件，<strong>通过 link 标签加载</strong>性能才好。webpack 中有 <code>mini-css-extract-plugin</code> 插件可以帮助我们做到。</p>
<h3 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mini-css-extract-plugin -D</span><br></pre></td></tr></table></figure>
<h3 id="配置-3"><a href="#配置-3" class="headerlink" title="配置"></a>配置</h3><p>webpack.prod.js</p>
<p><strong>注意：所有使用 <code>&quot;style-loader&quot;</code> 的地方都要替换成：<code>MiniCssExtractPlugin.loader</code></strong></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);</span></span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line"><span class="addition">+    // 提取css成单独文件</span></span><br><span class="line"><span class="addition">+    new MiniCssExtractPlugin(&#123;</span></span><br><span class="line"><span class="addition">+      // 定义输出文件名和目录</span></span><br><span class="line"><span class="addition">+      filename: &quot;static/css/main.css&quot;,</span></span><br><span class="line"><span class="addition">+    &#125;),</span></span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Css-兼容性处理"><a href="#Css-兼容性处理" class="headerlink" title="Css 兼容性处理"></a>Css 兼容性处理</h2><h3 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i postcss-loader postcss postcss-preset-env -D</span><br></pre></td></tr></table></figure>
<h3 id="配置-4"><a href="#配置-4" class="headerlink" title="配置"></a>配置</h3><p>webpack.prod.js</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        // 用来匹配 .css 结尾的文件</span><br><span class="line">        test: /\.css$/,</span><br><span class="line">        // use 数组里面 Loader 执行顺序是从右到左</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          &quot;css-loader&quot;,</span><br><span class="line">          &#123;</span><br><span class="line"><span class="addition">+            loader: &quot;postcss-loader&quot;,</span></span><br><span class="line"><span class="addition">+            options: &#123;</span></span><br><span class="line"><span class="addition">+              postcssOptions: &#123;</span></span><br><span class="line"><span class="addition">+                plugins: [</span></span><br><span class="line"><span class="addition">+                  &quot;postcss-preset-env&quot;, // 能解决大多数样式兼容性问题</span></span><br><span class="line"><span class="addition">+                ],</span></span><br><span class="line"><span class="addition">+              &#125;,</span></span><br><span class="line"><span class="addition">+            &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.less$/,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          &quot;css-loader&quot;,</span><br><span class="line">          &#123;</span><br><span class="line"><span class="addition">+            loader: &quot;postcss-loader&quot;,</span></span><br><span class="line"><span class="addition">+            options: &#123;</span></span><br><span class="line"><span class="addition">+              postcssOptions: &#123;</span></span><br><span class="line"><span class="addition">+                plugins: [</span></span><br><span class="line"><span class="addition">+                  &quot;postcss-preset-env&quot;, // 能解决大多数样式兼容性问题</span></span><br><span class="line"><span class="addition">+                ],</span></span><br><span class="line"><span class="addition">+              &#125;,</span></span><br><span class="line"><span class="addition">+            &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;less-loader&quot;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.s[ac]ss$/,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          &quot;css-loader&quot;,</span><br><span class="line">          &#123;</span><br><span class="line"><span class="addition">+            loader: &quot;postcss-loader&quot;,</span></span><br><span class="line"><span class="addition">+            options: &#123;</span></span><br><span class="line"><span class="addition">+              postcssOptions: &#123;</span></span><br><span class="line"><span class="addition">+                plugins: [</span></span><br><span class="line"><span class="addition">+                  &quot;postcss-preset-env&quot;, // 能解决大多数样式兼容性问题</span></span><br><span class="line"><span class="addition">+                ],</span></span><br><span class="line"><span class="addition">+              &#125;,</span></span><br><span class="line"><span class="addition">+            &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;sass-loader&quot;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.styl$/,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          &quot;css-loader&quot;,</span><br><span class="line">          &#123;</span><br><span class="line"><span class="addition">+            loader: &quot;postcss-loader&quot;,</span></span><br><span class="line"><span class="addition">+            options: &#123;</span></span><br><span class="line"><span class="addition">+              postcssOptions: &#123;</span></span><br><span class="line"><span class="addition">+                plugins: [</span></span><br><span class="line"><span class="addition">+                  &quot;postcss-preset-env&quot;, // 能解决大多数样式兼容性问题</span></span><br><span class="line"><span class="addition">+                ],</span></span><br><span class="line"><span class="addition">+              &#125;,</span></span><br><span class="line"><span class="addition">+            &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;stylus-loader&quot;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="合并配置"><a href="#合并配置" class="headerlink" title="合并配置"></a>合并配置</h3><p>将上面配置中地重复性代码抽离出来</p>
<p>webpack.prod.js</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">// 获取处理样式的 Loaders</span><br><span class="line"><span class="addition">+ const getStyleLoaders = (preProcessor) =&gt; &#123;</span></span><br><span class="line"><span class="addition">+   return [</span></span><br><span class="line"><span class="addition">+     MiniCssExtractPlugin.loader,</span></span><br><span class="line"><span class="addition">+     &quot;css-loader&quot;,</span></span><br><span class="line"><span class="addition">+     &#123;</span></span><br><span class="line"><span class="addition">+       loader: &quot;postcss-loader&quot;,</span></span><br><span class="line"><span class="addition">+       options: &#123;</span></span><br><span class="line"><span class="addition">+         postcssOptions: &#123;</span></span><br><span class="line"><span class="addition">+           plugins: [</span></span><br><span class="line"><span class="addition">+             &quot;postcss-preset-env&quot;, // 能解决大多数样式兼容性问题</span></span><br><span class="line"><span class="addition">+           ],</span></span><br><span class="line"><span class="addition">+         &#125;,</span></span><br><span class="line"><span class="addition">+       &#125;,</span></span><br><span class="line"><span class="addition">+     &#125;,</span></span><br><span class="line"><span class="addition">+     preProcessor,</span></span><br><span class="line"><span class="addition">+   ].filter(Boolean);</span></span><br><span class="line"><span class="addition">+ &#125;;</span></span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        // 用来匹配 .css 结尾的文件</span><br><span class="line">        test: /\.css$/,</span><br><span class="line">        // use 数组里面 Loader 执行顺序是从右到左</span><br><span class="line"><span class="addition">+        use: getStyleLoaders(),</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.less$/,</span><br><span class="line"><span class="addition">+        use: getStyleLoaders(&quot;less-loader&quot;),</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.s[ac]ss$/,</span><br><span class="line"><span class="addition">+        use: getStyleLoaders(&quot;sass-loader&quot;),</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.styl$/,</span><br><span class="line"><span class="addition">+        use: getStyleLoaders(&quot;stylus-loader&quot;),</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="控制兼容性"><a href="#控制兼容性" class="headerlink" title="控制兼容性"></a>控制兼容性</h3><p>可以在 <code>package.json</code> 文件中添加 <code>browserslist</code> 来控制样式的兼容性做到什么程度</p>
<p>更多 browserslist 配置，查看 <a target="_blank" rel="noopener" href="https://github.com/browserslist/browserslist">browserslist 文档</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;last 2 version&quot;</span><span class="punctuation">,</span> <span class="string">&quot;&gt; 1%&quot;</span><span class="punctuation">,</span> <span class="string">&quot;not dead&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="Css-压缩"><a href="#Css-压缩" class="headerlink" title="Css 压缩"></a>Css 压缩</h2><h3 id="安装-4"><a href="#安装-4" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i css-minimizer-webpack-plugin -D</span><br></pre></td></tr></table></figure>
<h3 id="配置-5"><a href="#配置-5" class="headerlink" title="配置"></a>配置</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ const CssMinimizerPlugin = require(&quot;css-minimizer-webpack-plugin&quot;);</span></span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">    new ESLintWebpackPlugin(&#123;</span><br><span class="line">    // css压缩</span><br><span class="line"><span class="addition">+    new CssMinimizerPlugin(),</span></span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Webpack-优化"><a href="#Webpack-优化" class="headerlink" title="Webpack 优化"></a>Webpack 优化</h1><p>主要从从以下角度来进行优化：</p>
<ol>
<li>提升开发体验</li>
<li>提升打包构建速度</li>
<li>减少代码体积</li>
<li>优化代码运行性能</li>
</ol>
<h2 id="提升开发体验"><a href="#提升开发体验" class="headerlink" title="提升开发体验"></a>提升开发体验</h2><h3 id="配置-快捷路径"><a href="#配置-快捷路径" class="headerlink" title="配置 @ 快捷路径"></a>配置 @ 快捷路径</h3><p>使用 <code>@</code> 表示 src 源代码目录，从外往里查找；不要使用 <code>../../</code> 从里往外查找</p>
<ol>
<li>在 webpack.config.js 中配置<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resolve</span>: &#123;</span><br><span class="line">  <span class="attr">alias</span>: &#123;</span><br><span class="line">    <span class="string">&quot;@&quot;</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./src/&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>在项目中直接使用 <code>@</code> 表示 src 源代码目录</li>
</ol>
<h3 id="SourceMap"><a href="#SourceMap" class="headerlink" title="SourceMap"></a>SourceMap</h3><p>开发时我们运行的代码是经过 webpack 编译后的所有 css 和 js 合并成了一个文件，并且多了其他代码。此时如果代码运行出错则很难去发现错误出现在哪里<br>SourceMap（源代码映射）是一个用来生成源代码与构建后代码一一映射的文件的方案。它会生成一个 xxx.map 文件，里面包含源代码和构建后代码每一行、每一列的映射关系。当构建后代码出错了，会通过 xxx.map 文件，从构建后代码出错位置<strong>找到映射后源代码出错位置</strong>，从而让浏览器提示源代码文件出错位置，<strong>帮助我们更快的找到错误根源和调试</strong>。</p>
<p>SourceMap 的值有很多种情况，详情可以查看 <a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/devtool/#root">Webpack DevTool 文档</a></p>
<p>实际开发时我们只需要关注两种情况即可：</p>
<h4 id="开发模式：cheap-module-source-map"><a href="#开发模式：cheap-module-source-map" class="headerlink" title="开发模式：cheap-module-source-map"></a>开发模式：cheap-module-source-map</h4><p>优点：<strong>打包编译速度快，只包含行映射</strong><br>缺点：没有列映射</p>
<p>webpack.dev.js</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  mode: &quot;development&quot;,</span><br><span class="line"><span class="addition">+  devtool: &quot;cheap-module-source-map&quot;,</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>提示：开发环境下建议把 devtool 的值设置为 <code>eval-source-map</code> 好处：<strong>可以精准定位到具体的错误行</strong></p>
<h4 id="生产模式：source-map"><a href="#生产模式：source-map" class="headerlink" title="生产模式：source-map"></a>生产模式：source-map</h4><p>优点：<strong>包含行/列映射</strong><br>缺点：打包编译速度更慢</p>
<p>webpack.prod.js</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  mode: &quot;production&quot;,</span><br><span class="line"><span class="addition">+  devtool: &quot;source-map&quot;,</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>提示：生产模式下为了<strong>安全性考虑</strong>建议将 devtool 的值设置为：<code>nosources-source-map</code> 或关闭 <code>source-map</code> 好处：防止源码泄露，提高网站的安全性</p>
<h2 id="提升打包构建速度"><a href="#提升打包构建速度" class="headerlink" title="提升打包构建速度"></a>提升打包构建速度</h2><h3 id="HMR"><a href="#HMR" class="headerlink" title="HMR"></a>HMR</h3><p>HotModuleReplacement（HMR/热模块替换）：在程序运行中，替换、添加或删除模块，而无需重新加载整个页面。</p>
<p>开发时我们修改了其中一个模块代码，Webpack 默认会将所有模块全部重新打包编译，速度很慢。所以我们需要做到修改某个模块代码，就只有这个模块代码需要重新打包编译，其他模块不变，这样打包速度就能变快。</p>
<h4 id="配置-6"><a href="#配置-6" class="headerlink" title="配置"></a>配置</h4><p>webpack.dev.js</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // 其他省略</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    host: &quot;localhost&quot;, // 启动服务器域名</span><br><span class="line">    port: &quot;3000&quot;, // 启动服务器端口号</span><br><span class="line">    open: true, // 是否自动打开浏览器</span><br><span class="line"><span class="addition">+    hot: true, // 开启HMR功能（只能用于开发环境，生产环境不需要了）</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>css 样式经过 style-loader 处理，已经具备 HMR 功能了。 但是 js 还不行</p>
<h4 id="JS-配置"><a href="#JS-配置" class="headerlink" title="JS 配置"></a>JS 配置</h4><p>main.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断是否支持HMR功能</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/xxx.js&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面这样写会很麻烦，所以实际开发我们会使用其他 loader 来解决</p>
<p>如：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-loader">vue-loader</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/gaearon/react-hot-loader">react-hot-loader</a></li>
</ol>
<h3 id="OneOf"><a href="#OneOf" class="headerlink" title="OneOf"></a>OneOf</h3><p>打包时每个文件都会经过所有 loader 处理，虽然因为 test 正则原因实际没有处理上，但是都要过一遍，比较慢。<br>OneOf 顾名思义就是只能匹配上一个 loader, 剩下的就不匹配了（开发模式和生产模式都可以使用）</p>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">oneOf</span>: [</span><br><span class="line">        <span class="comment">// 将所有的 loader 放到这个里面</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Include-Exclude"><a href="#Include-Exclude" class="headerlink" title="Include/Exclude"></a>Include/Exclude</h3><p>开发时我们需要使用第三方的库或插件，所有文件都下载到 <code>node_modules</code> 中了。而这些文件是不需要编译可以直接使用的。<br>所以我们在对 js 文件处理时，要排除 <code>node_modules</code> 下面的文件。<code>Include / Exclude</code> 只能使用一个。<br>include：包含，只处理 xxx 文件<br>exclude：排除，除了 xxx 文件以外其他文件都处理</p>
<h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">   <span class="comment">// exclude: /node_modules/, // 排除node_modules代码不编译</span></span><br><span class="line">   <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// 也可以用包含</span></span><br><span class="line">   <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h3><p>每次打包时 js 文件都要经过 Eslint 检查 和 Babel 编译，速度比较慢。我们<strong>可以缓存之前的 Eslint 检查 和 Babel 编译结果</strong>，这样第二次打包时速度就会更快了。</p>
<h4 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;);</span><br><span class="line">const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">       &#123;</span><br><span class="line">         test: /\.js$/,</span><br><span class="line">         // exclude: /node_modules/, // 排除node_modules代码不编译</span><br><span class="line">         include: path.resolve(__dirname, &quot;../src&quot;), // 也可以用包含</span><br><span class="line">         loader: &quot;babel-loader&quot;,</span><br><span class="line"><span class="addition">+         options: &#123;</span></span><br><span class="line"><span class="addition">+           cacheDirectory: true, // 开启babel编译缓存</span></span><br><span class="line"><span class="addition">+           cacheCompression: false, // 缓存文件不要压缩</span></span><br><span class="line"><span class="addition">+         &#125;,</span></span><br><span class="line">       &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new ESLintWebpackPlugin(&#123;</span><br><span class="line">      // 指定检查文件的根目录</span><br><span class="line">      context: path.resolve(__dirname, &quot;../src&quot;),</span><br><span class="line">      exclude: &quot;node_modules&quot;, // 默认值</span><br><span class="line"><span class="addition">+      cache: true, // 开启缓存</span></span><br><span class="line"><span class="addition">+      // 缓存目录</span></span><br><span class="line"><span class="addition">+      cacheLocation: path.resolve(</span></span><br><span class="line"><span class="addition">+        __dirname,</span></span><br><span class="line"><span class="addition">+        &quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Thead"><a href="#Thead" class="headerlink" title="Thead"></a>Thead</h3><p>当项目越来越庞大时，打包速度越来越慢，甚至于需要一个下午才能打包出来代码。这个速度是比较慢的。<br>我们想要继续提升打包速度，其实就是要提升 js 的打包速度，因为其他文件都比较少。<br>而对 js 文件处理主要就是 eslint 、babel、Terser 三个工具，所以我们要提升它们的运行速度。<br>我们可以开启多进程同时处理 js 文件，这样速度就比之前的单进程打包更快了。</p>
<p>深入：<a target="_blank" rel="noopener" href="http://xxpromise.gitee.io/webpack5-docs/senior/liftingSpeed.html#thead">http://xxpromise.gitee.io/webpack5-docs/senior/liftingSpeed.html#thead</a></p>
<h2 id="减少代码体积"><a href="#减少代码体积" class="headerlink" title="减少代码体积"></a>减少代码体积</h2><h3 id="Tree-Shaking"><a href="#Tree-Shaking" class="headerlink" title="Tree Shaking"></a>Tree Shaking</h3><p>Tree Shaking 是一个术语，通常用于描述移除 JavaScript 中的<strong>没有使用上的代码</strong>。Webpack 已经默认开启了这个功能，无需其他配置。</p>
<p>注意：它依赖 ES Module</p>
<h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h3><p>Babel 为编译的每个文件都插入了辅助代码，使代码体积过大！<br>Babel 对一些公共方法使用了非常小的辅助代码，比如 _extend。默认情况下会被添加到每一个需要它的文件中。<br>你可以将这些辅助代码作为一个独立模块，来避免重复引入。<br><code>@babel/plugin-transform-runtime</code>: 禁用了 Babel 自动对每个文件的 runtime 注入，而是引入 <code>@babel/plugin-transform-runtime</code> 并且使所有辅助代码从这里引用</p>
<h4 id="安装-5"><a href="#安装-5" class="headerlink" title="安装"></a>安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @babel/plugin-transform-runtime -D</span><br></pre></td></tr></table></figure>
<h4 id="配置-7"><a href="#配置-7" class="headerlink" title="配置"></a>配置</h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    loader: &quot;babel-loader&quot;,</span><br><span class="line">    options: &#123;</span><br><span class="line"><span class="addition">+        plugins: [&quot;@babel/plugin-transform-runtime&quot;], // 减少代码体积</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="Image-Minimizer"><a href="#Image-Minimizer" class="headerlink" title="Image Minimizer"></a>Image Minimizer</h3><p><code>image-minimizer-webpack-plugin</code> 是用来压缩图片的插件。如果项目中引用了较多图片，那么图片体积会比较大，将来请求速度比较慢。我们可以对图片进行压缩，减少图片体积。<br>注意：如果项目中图片都是在线链接，那么就不需要了。本地项目静态图片才需要进行压缩。</p>
<h4 id="安装-6"><a href="#安装-6" class="headerlink" title="安装"></a>安装</h4><p>下载包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i image-minimizer-webpack-plugin imagemin -D</span><br></pre></td></tr></table></figure>
<p>两种压缩模式：</p>
<p><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%97%A0%E6%8D%9F%E3%80%81%E6%9C%89%E6%8D%9F%E5%8E%8B%E7%BC%A9">有损/无损压缩的区别</a></p>
<p>无损压缩：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo -D</span><br></pre></td></tr></table></figure>
<p>有损压缩：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo -D</span><br></pre></td></tr></table></figure>
<h4 id="配置-8"><a href="#配置-8" class="headerlink" title="配置"></a>配置</h4><p>无损压缩配置为例：</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+const ImageMinimizerPlugin = require(&quot;image-minimizer-webpack-plugin&quot;);</span></span><br><span class="line"></span><br><span class="line">optimization: &#123;</span><br><span class="line">// 压缩图片</span><br><span class="line">new ImageMinimizerPlugin(&#123;</span><br><span class="line"><span class="addition">+minimizer: &#123;</span></span><br><span class="line"><span class="addition">+ implementation: ImageMinimizerPlugin.imageminGenerate,</span></span><br><span class="line"><span class="addition">+ options: &#123;</span></span><br><span class="line"><span class="addition">+   plugins: [</span></span><br><span class="line"><span class="addition">+     [&quot;gifsicle&quot;, &#123; interlaced: true &#125;],</span></span><br><span class="line"><span class="addition">+     [&quot;jpegtran&quot;, &#123; progressive: true &#125;],</span></span><br><span class="line"><span class="addition">+     [&quot;optipng&quot;, &#123; optimizationLevel: 5 &#125;],</span></span><br><span class="line"><span class="addition">+     [</span></span><br><span class="line"><span class="addition">+       &quot;svgo&quot;,</span></span><br><span class="line"><span class="addition">+       &#123;</span></span><br><span class="line"><span class="addition">+         plugins: [</span></span><br><span class="line"><span class="addition">+           &quot;preset-default&quot;,</span></span><br><span class="line"><span class="addition">+           &quot;prefixIds&quot;,</span></span><br><span class="line"><span class="addition">+           &#123;</span></span><br><span class="line"><span class="addition">+             name: &quot;sortAttrs&quot;,</span></span><br><span class="line"><span class="addition">+             params: &#123;</span></span><br><span class="line"><span class="addition">+               xmlnsOrder: &quot;alphabetical&quot;,</span></span><br><span class="line"><span class="addition">+             &#125;,</span></span><br><span class="line"><span class="addition">+           &#125;,</span></span><br><span class="line"><span class="addition">+         ],</span></span><br><span class="line"><span class="addition">+       &#125;,</span></span><br><span class="line"><span class="addition">+     ],</span></span><br><span class="line"><span class="addition">+   ],</span></span><br><span class="line"><span class="addition">+ &#125;,</span></span><br><span class="line"><span class="addition">+&#125;,</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="优化代码运行性能"><a href="#优化代码运行性能" class="headerlink" title="优化代码运行性能"></a>优化代码运行性能</h2><h3 id="Code-Split"><a href="#Code-Split" class="headerlink" title="Code Split"></a>Code Split</h3><p>打包代码时会将所有 js 文件打包到一个文件中，体积太大了。我们如果只要渲染首页，就应该只加载首页的 js 文件，其他文件不应该加载<br>所以我们需要将打包生成的文件进行代码分割，生成多个 js 文件，渲染哪个页面就只加载某个 js 文件，这样加载的资源就少，速度就更快</p>
<p>代码分割（Code Split）主要做了两件事：</p>
<ol>
<li>分割文件：将打包生成的文件进行分割，生成多个 js 文件</li>
<li>按需加载：需要哪个文件就加载哪个文件</li>
</ol>
<h3 id="Preload-Prefetch"><a href="#Preload-Prefetch" class="headerlink" title="Preload / Prefetch"></a>Preload / Prefetch</h3><p>前面已经做了代码分割，同时会使用 import 动态导入语法来进行代码按需加载（我们也叫懒加载，比如路由懒加载就是这样实现的）<br>但是加载速度还不够好，比如：是用户点击按钮时才加载这个资源的，<strong>如果资源体积很大，那么用户会感觉到明显卡顿效果</strong><br>我们想在浏览器空闲时间，加载后续需要使用的资源。我们就需要用上 Preload 或 Prefetch 技术。</p>
<p><code>Preload</code>：告诉浏览器<strong>立即加载</strong>资源<br><code>Prefetch</code>：告诉浏览器在<strong>空闲时才开始加载</strong>资源</p>
<p>共同点：</p>
<p>都只会加载资源，并不执行<br>都有缓存<br>兼容性较差。(Preload 相对于 Prefetch 兼容性好一点。)</p>
<p>区别：</p>
<p>Preload加载优先级高，Prefetch加载优先级低<br>Preload只能加载当前页面需要使用的资源，Prefetch可以加载当前页面资源，也可以加载下一个页面需要使用的资源</p>
<p>总结：</p>
<p>当前页面优先级高的资源用 Preload 加载<br>下一个页面需要使用的资源用 Prefetch 加载</p>
<h3 id="Network-Cache"><a href="#Network-Cache" class="headerlink" title="Network Cache"></a>Network Cache</h3><p>将来开发时我们对静态资源会使用缓存来优化，这样浏览器第二次请求资源就能读取缓存了，速度很快。<br>但是这样的话就会有一个问题, 因为前后输出的文件名是一样的，都叫 main.js，一旦将来发布新版本，因为文件名没有变化导致浏览器会直接读取缓存，不会加载新资源，项目也就没法更新了。<br>所以我们从文件名入手，确保更新前后文件名不一样，这样就可以做缓存了。</p>
<h3 id="Core-js"><a href="#Core-js" class="headerlink" title="Core-js"></a>Core-js</h3><p>过去我们使用 babel 对 js 代码进行了兼容性处理，其中使用@babel/preset-env 智能预设来处理兼容性问题。<br>它能将 ES6 的一些语法进行编译转换，比如箭头函数、点点点运算符等。但是如果是 async 函数、promise 对象、数组的一些方法（includes）等，它没办法处理。<br>所以此时我们 js 代码仍然存在兼容性问题，一旦遇到低版本浏览器会直接报错。所以我们想要将 js 兼容性问题彻底解决</p>
<p>core-js 是专门用来做 ES6 以及以上 API 的 polyfill<br>polyfill 翻译过来叫做垫片/补丁。就是用社区上提供的一段代码，让我们在不兼容某些新特性的浏览器上，使用该新特性。</p>
<h3 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h3><p>开发 Web App 项目，项目一旦处于网络离线情况，就没法访问了。我们希望给项目提供离线体验。<br>渐进式网络应用程序(progressive web application - PWA)：是一种可以提供类似于 native app(原生应用程序) 体验的 Web App 的技术。其中最重要的是，在 <strong>离线(offline) 时应用程序能够继续运行功能</strong>。内部通过 Service Workers 技术实现的。</p>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">为什么需要打包工具？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89%E5%93%AA%E4%BA%9B%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">有哪些打包工具？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack-%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="toc-number">1.3.</span> <span class="toc-text">Webpack 介绍与快速开始</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E5%A4%A7%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">五大概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#entry-%E5%85%A5%E5%8F%A3%EF%BC%89"><span class="toc-number">2.1.</span> <span class="toc-text">entry(入口）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#output-%E8%BE%93%E5%87%BA%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">output(输出）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#loader-%E5%8A%A0%E8%BD%BD%E5%99%A8%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">loader(加载器）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#plugins-%E6%8F%92%E4%BB%B6%EF%BC%89"><span class="toc-number">2.4.</span> <span class="toc-text">plugins(插件）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mode-%E6%A8%A1%E5%BC%8F%EF%BC%89"><span class="toc-number">2.5.</span> <span class="toc-text">mode(模式）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mode-development"><span class="toc-number">2.5.1.</span> <span class="toc-text">mode: development</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mode-production"><span class="toc-number">2.5.2.</span> <span class="toc-text">mode: production</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">2.5.3.</span> <span class="toc-text">模式配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95"><span class="toc-number">2.5.3.1.</span> <span class="toc-text">文件目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C"><span class="toc-number">2.5.3.2.</span> <span class="toc-text">运行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%BF%90%E8%A1%8C%E6%8C%87%E4%BB%A4"><span class="toc-number">2.5.3.3.</span> <span class="toc-text">配置运行指令</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-configuration"><span class="toc-number">3.</span> <span class="toc-text">配置(configuration)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.</span> <span class="toc-text">基本配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6%E5%90%8D"><span class="toc-number">3.2.</span> <span class="toc-text">入口文件打包输出文件名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%B8%85%E7%A9%BA%E4%B8%8A%E6%AC%A1%E6%89%93%E5%8C%85%E5%86%85%E5%AE%B9"><span class="toc-number">3.3.</span> <span class="toc-text">自动清空上次打包内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#loader"><span class="toc-number">4.</span> <span class="toc-text">loader</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-loader"><span class="toc-number">4.1.</span> <span class="toc-text">使用 loader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number">4.1.1.</span> <span class="toc-text">配置（推荐）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%81%94"><span class="toc-number">4.1.2.</span> <span class="toc-text">内联</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CLI"><span class="toc-number">4.1.3.</span> <span class="toc-text">CLI</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#loader-%E7%89%B9%E6%80%A7"><span class="toc-number">4.2.</span> <span class="toc-text">loader 特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%A0%B7%E5%BC%8F%E8%B5%84%E6%BA%90"><span class="toc-number">4.3.</span> <span class="toc-text">处理样式资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#css-loader"><span class="toc-number">4.3.1.</span> <span class="toc-text">css-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">4.3.1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">4.3.1.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#less-loader"><span class="toc-number">4.3.2.</span> <span class="toc-text">less-loader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sass-loader"><span class="toc-number">4.3.3.</span> <span class="toc-text">sass-loader</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90"><span class="toc-number">4.4.</span> <span class="toc-text">处理图片资源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87%E8%B5%84%E6%BA%90%E5%92%8C%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90"><span class="toc-number">4.5.</span> <span class="toc-text">处理字体图标资源和其他资源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86-js-%E8%B5%84%E6%BA%90"><span class="toc-number">4.6.</span> <span class="toc-text">处理 js 资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Eslint-%EF%BC%88%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F%EF%BC%89"><span class="toc-number">4.6.1.</span> <span class="toc-text">Eslint （代码格式）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8-Webpack-%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-number">4.6.1.1.</span> <span class="toc-text">在 Webpack 中使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%8C%85"><span class="toc-number">4.6.1.1.1.</span> <span class="toc-text">下载包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-eslintrc-js-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.6.1.1.2.</span> <span class="toc-text">创建.eslintrc.js 配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#webpack-config-js"><span class="toc-number">4.6.1.1.3.</span> <span class="toc-text">webpack.config.js</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-number">4.6.1.1.4.</span> <span class="toc-text">补充</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel-%EF%BC%88%E5%85%BC%E5%AE%B9%E6%80%A7%E5%A4%84%E7%90%86%EF%BC%89"><span class="toc-number">4.6.2.</span> <span class="toc-text">Babel （兼容性处理）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86-Html-%E8%B5%84%E6%BA%90"><span class="toc-number">4.7.</span> <span class="toc-text">处理 Html 资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-1"><span class="toc-number">4.7.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-1"><span class="toc-number">4.7.2.</span> <span class="toc-text">配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%8C%96%EF%BC%88devServer%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">自动化（devServer）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD"><span class="toc-number">5.1.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-2"><span class="toc-number">5.2.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%8C%87%E4%BB%A4"><span class="toc-number">5.3.</span> <span class="toc-text">运行指令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Css-%E5%A4%84%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">Css 处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E5%8F%96-Css-%E6%88%90%E5%8D%95%E7%8B%AC%E6%96%87%E4%BB%B6"><span class="toc-number">6.1.</span> <span class="toc-text">提取 Css 成单独文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-2"><span class="toc-number">6.1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-3"><span class="toc-number">6.1.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Css-%E5%85%BC%E5%AE%B9%E6%80%A7%E5%A4%84%E7%90%86"><span class="toc-number">6.2.</span> <span class="toc-text">Css 兼容性处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-3"><span class="toc-number">6.2.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-4"><span class="toc-number">6.2.2.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">6.2.3.</span> <span class="toc-text">合并配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%85%BC%E5%AE%B9%E6%80%A7"><span class="toc-number">6.2.4.</span> <span class="toc-text">控制兼容性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Css-%E5%8E%8B%E7%BC%A9"><span class="toc-number">6.3.</span> <span class="toc-text">Css 压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-4"><span class="toc-number">6.3.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-5"><span class="toc-number">6.3.2.</span> <span class="toc-text">配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Webpack-%E4%BC%98%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">Webpack 优化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E5%8D%87%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C"><span class="toc-number">7.1.</span> <span class="toc-text">提升开发体验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-%E5%BF%AB%E6%8D%B7%E8%B7%AF%E5%BE%84"><span class="toc-number">7.1.1.</span> <span class="toc-text">配置 @ 快捷路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SourceMap"><span class="toc-number">7.1.2.</span> <span class="toc-text">SourceMap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%EF%BC%9Acheap-module-source-map"><span class="toc-number">7.1.2.1.</span> <span class="toc-text">开发模式：cheap-module-source-map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E6%A8%A1%E5%BC%8F%EF%BC%9Asource-map"><span class="toc-number">7.1.2.2.</span> <span class="toc-text">生产模式：source-map</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E5%8D%87%E6%89%93%E5%8C%85%E6%9E%84%E5%BB%BA%E9%80%9F%E5%BA%A6"><span class="toc-number">7.2.</span> <span class="toc-text">提升打包构建速度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HMR"><span class="toc-number">7.2.1.</span> <span class="toc-text">HMR</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-6"><span class="toc-number">7.2.1.1.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS-%E9%85%8D%E7%BD%AE"><span class="toc-number">7.2.1.2.</span> <span class="toc-text">JS 配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OneOf"><span class="toc-number">7.2.2.</span> <span class="toc-text">OneOf</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">7.2.2.1.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Include-Exclude"><span class="toc-number">7.2.3.</span> <span class="toc-text">Include&#x2F;Exclude</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-1"><span class="toc-number">7.2.3.1.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cache"><span class="toc-number">7.2.4.</span> <span class="toc-text">Cache</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-2"><span class="toc-number">7.2.4.1.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Thead"><span class="toc-number">7.2.5.</span> <span class="toc-text">Thead</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%8F%E5%B0%91%E4%BB%A3%E7%A0%81%E4%BD%93%E7%A7%AF"><span class="toc-number">7.3.</span> <span class="toc-text">减少代码体积</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tree-Shaking"><span class="toc-number">7.3.1.</span> <span class="toc-text">Tree Shaking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel"><span class="toc-number">7.3.2.</span> <span class="toc-text">Babel</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-5"><span class="toc-number">7.3.2.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-7"><span class="toc-number">7.3.2.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Image-Minimizer"><span class="toc-number">7.3.3.</span> <span class="toc-text">Image Minimizer</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-6"><span class="toc-number">7.3.3.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-8"><span class="toc-number">7.3.3.2.</span> <span class="toc-text">配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E4%BB%A3%E7%A0%81%E8%BF%90%E8%A1%8C%E6%80%A7%E8%83%BD"><span class="toc-number">7.4.</span> <span class="toc-text">优化代码运行性能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Code-Split"><span class="toc-number">7.4.1.</span> <span class="toc-text">Code Split</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Preload-Prefetch"><span class="toc-number">7.4.2.</span> <span class="toc-text">Preload &#x2F; Prefetch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Network-Cache"><span class="toc-number">7.4.3.</span> <span class="toc-text">Network Cache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Core-js"><span class="toc-number">7.4.4.</span> <span class="toc-text">Core-js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PWA"><span class="toc-number">7.4.5.</span> <span class="toc-text">PWA</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: rgba(27, 27, 27, .5)"><div id="footer-wrap"><div class="copyright">&copy;2000 - 2023 By 曾庆生</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索 🎿</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  人家正在加载呢~</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="输入关键词 ..." type="text"/></div></div><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script src="/js/sun_moon.js" async></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/06/132022 归档/工具/工具_EXCEL_EXCEL函数应用记录/bfa31c7a/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice_23/main/img/20230613115124.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-13</span><a class="blog-slider__title" href="2023/06/132022 归档/工具/工具_EXCEL_EXCEL函数应用记录/bfa31c7a/" alt="">EXCEL函数应用记录</a><div class="blog-slider__text">emm...</div><a class="blog-slider__button" href="2023/06/132022 归档/工具/工具_EXCEL_EXCEL函数应用记录/bfa31c7a/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/05/022022 归档/工具/工具_手册_速查指令/efc31b2a/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/HaloBoys/PicGoMyDevice/img/shortcut.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-02</span><a class="blog-slider__title" href="2022/05/022022 归档/工具/工具_手册_速查指令/efc31b2a/" alt="">速查指令</a><div class="blog-slider__text">软件 工具 常用指令集合</div><a class="blog-slider__button" href="2022/05/022022 归档/工具/工具_手册_速查指令/efc31b2a/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/05/192022 归档/工具/工具_手册_博客架构及编写规范/5f35053a/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice_23/main/img/20230311155239.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-19</span><a class="blog-slider__title" href="2022/05/192022 归档/工具/工具_手册_博客架构及编写规范/5f35053a/" alt="">庆生的第二大脑架构及规范</a><div class="blog-slider__text">emm...</div><a class="blog-slider__button" href="2022/05/192022 归档/工具/工具_手册_博客架构及编写规范/5f35053a/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/07/072022 归档/工具/工具_手册_Bug记录及解决/10d28195/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice_23/main/img/images%20(1).png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-07-07</span><a class="blog-slider__title" href="2022/07/072022 归档/工具/工具_手册_Bug记录及解决/10d28195/" alt="">Bug记录及解决</a><div class="blog-slider__text">实践中遇到的八阿哥汇总</div><a class="blog-slider__button" href="2022/07/072022 归档/工具/工具_手册_Bug记录及解决/10d28195/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>