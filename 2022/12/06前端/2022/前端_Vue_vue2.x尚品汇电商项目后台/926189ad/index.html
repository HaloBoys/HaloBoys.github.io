<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Vue2.X 尚品汇电商项目（后台） | 庆生的第二大脑</title><meta name="keywords" content="vue,Project"><meta name="author" content="曾庆生"><meta name="copyright" content="曾庆生"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="尚品汇后台管理端后台管理端：可以让用户通过一个可视化工具，可以实现对于数据库进行增删改查的操作。 尚品汇后台管理项目教程：https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1Vf4y1T7bw?p&#x3D;122&amp;vd_source&#x3D;3ed70d49b47a074637711a68e7f42b04 vue-admin-templatevue-admin-template 是一个 v">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue2.X 尚品汇电商项目（后台）">
<meta property="og:url" content="https://haloboys.github.io/2022/12/06%E5%89%8D%E7%AB%AF/2022/%E5%89%8D%E7%AB%AF_Vue_vue2.x%E5%B0%9A%E5%93%81%E6%B1%87%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE%E5%90%8E%E5%8F%B0/926189ad/index.html">
<meta property="og:site_name" content="庆生的第二大脑">
<meta property="og:description" content="尚品汇后台管理端后台管理端：可以让用户通过一个可视化工具，可以实现对于数据库进行增删改查的操作。 尚品汇后台管理项目教程：https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1Vf4y1T7bw?p&#x3D;122&amp;vd_source&#x3D;3ed70d49b47a074637711a68e7f42b04 vue-admin-templatevue-admin-template 是一个 v">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice/main/img/20230303132711.png">
<meta property="article:published_time" content="2022-12-06T05:16:49.000Z">
<meta property="article:modified_time" content="2023-09-19T10:14:28.813Z">
<meta property="article:author" content="曾庆生">
<meta property="article:tag" content="vue">
<meta property="article:tag" content="Project">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice/main/img/20230303132711.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://haloboys.github.io/2022/12/06%E5%89%8D%E7%AB%AF/2022/%E5%89%8D%E7%AB%AF_Vue_vue2.x%E5%B0%9A%E5%93%81%E6%B1%87%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE%E5%90%8E%E5%8F%B0/926189ad/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-2TB604K6W6"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-2TB604K6W6');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"没有查询到关键词：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"已切换为繁体","cht_to_chs":"已切换为简体","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#3b4252","bgDark":"#00c4b6","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue2.X 尚品汇电商项目（后台）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-19 18:14:28'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/scrollbar.css"><script src="https://cdn.jsdelivr.net/npm/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/89033762?v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">86</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">庆生的第二大脑</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Vue2.X 尚品汇电商项目（后台）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-06T05:16:49.000Z" title="发表于 2022-12-06 13:16:49">2022-12-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-19T10:14:28.813Z" title="更新于 2023-09-19 18:14:28">2023-09-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/Vue/">Vue</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span></div></div></div><article class="post-content" id="article-container"><h1 id="尚品汇后台管理端"><a href="#尚品汇后台管理端" class="headerlink" title="尚品汇后台管理端"></a>尚品汇后台管理端</h1><p>后台管理端：可以让用户通过一个可视化工具，可以实现对于数据库进行增删改查的操作。</p>
<p>尚品汇后台管理项目教程：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Vf4y1T7bw?p=122&amp;vd_source=3ed70d49b47a074637711a68e7f42b04">https://www.bilibili.com/video/BV1Vf4y1T7bw?p=122&amp;vd_source=3ed70d49b47a074637711a68e7f42b04</a></p>
<h2 id="vue-admin-template"><a href="#vue-admin-template" class="headerlink" title="vue-admin-template"></a>vue-admin-template</h2><p><a target="_blank" rel="noopener" href="https://github.com/PanJiaChen/vue-admin-template">vue-admin-template</a> 是一个 vue2.x 管理模板，本项目基于此模板<code>二次开发</code>。</p>
<h2 id="API-接口文档"><a href="#API-接口文档" class="headerlink" title="API 接口文档"></a>API 接口文档</h2><ul>
<li><a target="_blank" rel="noopener" href="http://39.98.123.211:8170/swagger-ui.html">http://39.98.123.211:8170/swagger-ui.html</a></li>
<li><a target="_blank" rel="noopener" href="http://39.98.123.211:8510/swagger-ui.html">http://39.98.123.211:8510/swagger-ui.html</a></li>
</ul>
<h3 id="项目接口配置"><a href="#项目接口配置" class="headerlink" title="项目接口配置"></a>项目接口配置</h3><p>项目中的接口统一写在 api 文件夹，为了方便管理进行如下操作：</p>
<ol>
<li>创建 <code>api&gt;index.js</code>，将各个模块的 API 统一暴露</li>
<li>在 <code>main.js</code> 中将 <code>api&gt;index.js</code> 挂载到原型：</li>
<li>所有组件的实例都可以通过 <code>$API.xxx</code> 发起请求</li>
</ol>
<h3 id="配置代理跨域"><a href="#配置代理跨域" class="headerlink" title="配置代理跨域"></a>配置代理跨域</h3><p>编辑 <code>vue.config.js</code> 中的 devServer：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxy</span>: &#123;</span><br><span class="line">  <span class="string">&quot;/dev-api&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">target</span>: <span class="string">&quot;http://gmall-h5-api.atguigu.cn:80&quot;</span>,</span><br><span class="line">    <span class="attr">pathRewrite</span>: &#123;<span class="string">&quot;^/dev-api&quot;</span> : <span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>devServer.proxy：<a target="_blank" rel="noopener" href="https://www.webpackjs.com/configuration/dev-server/#devserver-proxy">https://www.webpackjs.com/configuration/dev-server/#devserver-proxy</a></p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><h1 id="插件相关"><a href="#插件相关" class="headerlink" title="插件相关"></a>插件相关</h1><h2 id="Element-UI"><a href="#Element-UI" class="headerlink" title="Element-UI"></a>Element-UI</h2><h3 id="表单自定义校验规则"><a href="#表单自定义校验规则" class="headerlink" title="表单自定义校验规则"></a>表单自定义校验规则</h3><h2 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a>Echarts</h2><h1 id="项目路由搭建"><a href="#项目路由搭建" class="headerlink" title="项目路由搭建"></a>项目路由搭建</h1><h2 id="views-目录结构"><a href="#views-目录结构" class="headerlink" title="views 目录结构"></a>views 目录结构</h2><h2 id="路由配置"><a href="#路由配置" class="headerlink" title="路由配置"></a>路由配置</h2><h1 id="全局组件封装"><a href="#全局组件封装" class="headerlink" title="全局组件封装"></a>全局组件封装</h1><h2 id="三级联动"><a href="#三级联动" class="headerlink" title="三级联动"></a>三级联动</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice/main/img/20221025104220.png" alt="20221025104220"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:inline</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;catInfo&quot;</span> <span class="attr">class</span>=<span class="string">&quot;demo-form-inline&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;一级分类&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">&quot;catInfo.catList1id&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;请选择&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">change</span>=<span class="string">&quot;catList1Handler&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:disabled</span>=<span class="string">&quot;iscontrol&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:label</span>=<span class="string">&quot;item.name&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:value</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">&quot;item in catList1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;二级分类&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">&quot;catInfo.catList2id&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;请选择&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">change</span>=<span class="string">&quot;catList2Handler&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:disabled</span>=<span class="string">&quot;iscontrol&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:label</span>=<span class="string">&quot;item.name&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:value</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">&quot;item in catList2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;三级分类&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">&quot;catInfo.catList3id&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;请选择&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">change</span>=<span class="string">&quot;catList3Handler&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:disabled</span>=<span class="string">&quot;iscontrol&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:label</span>=<span class="string">&quot;item.name&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:value</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">&quot;item in catList3&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;CategorySelect&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">formInline</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">region</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 服务器获取的1~3级分类列表</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">catList1</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">catList2</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">catList3</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// el-form 数据绑定源</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">catInfo</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 选中的 id</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">catList1id</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">catList2id</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">catList3id</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&quot;iscontrol&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">getCategory1</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">getCategory1</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$API</span>.<span class="property">attrmanage</span>.<span class="title function_">reqGetCategory1</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">catList1</span> = res.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">catList1Handler</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> &#123; catList1id &#125; = <span class="variable language_">this</span>.<span class="property">catInfo</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;getCategoryId&quot;</span>, &#123; <span class="attr">catListid</span>: catList1id, <span class="attr">level</span>: <span class="number">1</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 二次选择清空逻辑</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">catList2</span> = [];</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">catList3</span> = [];</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">catInfo</span>.<span class="property">catList2id</span> = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">catInfo</span>.<span class="property">catList3id</span> = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$API</span>.<span class="property">attrmanage</span>.<span class="title function_">reqGetCategory2</span>(catList1id);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">catList2</span> = res.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">catList2Handler</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> &#123; catList2id &#125; = <span class="variable language_">this</span>.<span class="property">catInfo</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;getCategoryId&quot;</span>, &#123; <span class="attr">catListid</span>: catList2id, <span class="attr">level</span>: <span class="number">2</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 二次选择清空逻辑</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">catList3</span> = [];</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">catInfo</span>.<span class="property">catList3id</span> = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$API</span>.<span class="property">attrmanage</span>.<span class="title function_">reqGetCategory3</span>(catList2id);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">catList3</span> = res.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">catList3Handler</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> &#123; catList3id &#125; = <span class="variable language_">this</span>.<span class="property">catInfo</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;getCategoryId&quot;</span>, &#123; <span class="attr">catListid</span>: catList3id, <span class="attr">level</span>: <span class="number">3</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="登录与退出登录"><a href="#登录与退出登录" class="headerlink" title="登录与退出登录"></a>登录与退出登录</h1><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><ol>
<li>将 <code>api&gt;user.js</code> 中的相关接口地址换成项目的接口地址</li>
<li>编辑 <code>utils&gt;request.js</code><br>将请求拦截器中 X-Token 换成 token 字段<br>将响应拦截器中状态码判断逻辑更换 <code>if (res.code !== 20000 &amp;&amp; res.code != 200)</code></li>
</ol>
<h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><p>用户登录 actions 重构成 async await 写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params"> commit</span></span><br><span class="line"><span class="params">&#125;, userInfo</span>) &#123;</span><br><span class="line"> <span class="keyword">const</span> &#123;</span><br><span class="line">   username,</span><br><span class="line">   password</span><br><span class="line"> &#125; = userInfo</span><br><span class="line"> <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">login</span>(&#123;</span><br><span class="line">   <span class="attr">username</span>: username.<span class="title function_">trim</span>(),</span><br><span class="line">   <span class="attr">password</span>: password</span><br><span class="line"> &#125;);</span><br><span class="line"> <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">200</span> || res.<span class="property">code</span> == <span class="number">20000</span>) &#123;</span><br><span class="line">   <span class="title function_">commit</span>(<span class="string">&#x27;SET_TOKEN&#x27;</span>, res.<span class="property">data</span>.<span class="property">token</span>)</span><br><span class="line">   <span class="title function_">setToken</span>(res.<span class="property">data</span>.<span class="property">token</span>)</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(res.<span class="property">message</span>))</span><br><span class="line"> &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="退出登录"><a href="#退出登录" class="headerlink" title="退出登录"></a>退出登录</h2><p>将 Navbar 组件中退出登录文字替换即可</p>
<h1 id="商品管理"><a href="#商品管理" class="headerlink" title="商品管理"></a>商品管理</h1><h2 id="品牌管理"><a href="#品牌管理" class="headerlink" title="品牌管理"></a>品牌管理</h2><h3 id="请求品牌列表-API"><a href="#请求品牌列表-API" class="headerlink" title="请求品牌列表 API"></a>请求品牌列表 API</h3><ol>
<li>在 api 文件夹下创建 <code>product&gt; tradeMark.js</code></li>
<li>编写请求品牌列表接口：<code>/admin/product/baseTrademark/&#123;page&#125;/&#123;limit&#125;</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  API: /admin/product/baseTrademark/&#123;page&#125;/&#123;limit&#125;</span></span><br><span class="line"><span class="comment">  Method: GET</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">reqTradeMarkList</span> = (<span class="params">page,limit</span>) =&gt; <span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">`/admin/product/baseTrademark/<span class="subst">$&#123;page&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;get&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>在 tradeMark 组件中将请求品牌列表接口封装成一个 method，在 mounted 钩子函数中调用该 method</li>
<li>data 中定义并初始化变量（传递给服务器的参数与服务器返回的数据）<ol>
<li>page（第几页）</li>
<li>limit（当前页展示的数据条数）</li>
<li>total（服务器返回的总共数据条数）</li>
<li>list（服务器返回的品牌列表数据）</li>
</ol>
</li>
</ol>
<h3 id="el-table-组件渲染数据"><a href="#el-table-组件渲染数据" class="headerlink" title="el-table 组件渲染数据"></a>el-table 组件渲染数据</h3><blockquote>
<p>el-table 组件展示的数据是以一列一列进行展示</p>
</blockquote>
<ol>
<li>将 el-table 组件的 data 属性与服务器返回的 list 品牌列表数据(数组) 进行绑定</li>
<li>序号: el-table-column 指定 <code>type=&quot;index&quot;</code> 可以展示索引</li>
<li>品牌：通过 el-table-column 的 prop 属性 指定服务器返回的属性即可</li>
<li>Logo: (展示图片)<ol>
<li>使用作用域插槽</li>
<li>img 展示插槽回传的数据</li>
</ol>
</li>
<li>操作：<ol>
<li>使用作用域插槽</li>
<li>编辑按钮</li>
<li>删除按钮</li>
</ol>
</li>
</ol>
<h3 id="el-pagination-分页数据绑定"><a href="#el-pagination-分页数据绑定" class="headerlink" title="el-pagination 分页数据绑定"></a>el-pagination 分页数据绑定</h3><ol>
<li>相关数据跟data绑定</li>
<li>事件<ol>
<li>@size-change 每页条数</li>
<li>@current-change 当前页码</li>
</ol>
</li>
</ol>
<h3 id="dialog"><a href="#dialog" class="headerlink" title="dialog"></a>dialog</h3><p>添加/修改品牌对话框(复用)</p>
<blockquote>
<p><code>:title=&quot;tradeInfo.id ? &#39;修改品牌&#39; : &#39;添加品牌&#39;&quot;</code></p>
</blockquote>
<ol>
<li>添加/修改点击事件，控制 dialog 显示 <code>dialogFormVisible</code></li>
<li>dialog 中：<ol>
<li>input</li>
<li>upload</li>
</ol>
</li>
</ol>
<h3 id="添加-修改品牌-API"><a href="#添加-修改品牌-API" class="headerlink" title="添加/修改品牌 API"></a>添加/修改品牌 API</h3><p>添加/修改品牌 API：(复用)</p>
<p>两个接口的区别：修改需要携带 id，添加不用<br>添加：/admin/product/baseTrademark/save<br>修改：/admin/product/baseTrademark/update</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tradeMark.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  API: </span></span><br><span class="line"><span class="comment">    添加：/admin/product/baseTrademark/save Method: post</span></span><br><span class="line"><span class="comment">    修改：/admin/product/baseTrademark/update Method: put</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">reqAddOrUpdateTradeMark</span> = (<span class="params">trademarkinfo</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 修改品牌</span></span><br><span class="line">  <span class="keyword">if</span> (trademarkinfo.<span class="property">id</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`/admin/product/baseTrademark/update`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;put&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: trademarkinfo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 添加品牌</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`/admin/product/baseTrademark/save`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: trademarkinfo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="添加品牌"><a href="#添加品牌" class="headerlink" title="添加品牌"></a>添加品牌</h3><ol>
<li>收集品牌相关数据（品牌名称和品牌logo）<ol>
<li>品牌名称: form 绑定 :model=”xxx” 将用户输入绑定到 data 的对象中，xxx 是一个对象，里面的属性根据接口来写</li>
<li>品牌logo 使用 upload 插件收集的，upload 相关属性：<ol>
<li>action：上传的地址 （<code>/dev-api/admin/product/fileUpload</code>）</li>
<li>:on-success=”handleAvatarSuccess” 上传成功的回调，在回调里面可以接收到服务器返回上传成功的地址</li>
</ol>
</li>
</ol>
</li>
<li>将 data 对象中收集到的数据作为添加/修改品牌 API的参数发起请求</li>
<li>成功之后将数据清空<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">addOrUpdateConfirm</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$API</span>.<span class="property">trademark</span>.<span class="title function_">reqAddOrUpdateTradeMark</span>(</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tradeInfo</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tradeInfo</span>.<span class="property">id</span> ? <span class="string">&quot;修改品牌成功&quot;</span> : <span class="string">&quot;添加品牌成功&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// 刷新列表</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getTradeMarkList</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tradeInfo</span> = &#123; <span class="attr">tmName</span>: <span class="string">&quot;&quot;</span>, <span class="attr">logoUrl</span>: <span class="string">&quot;&quot;</span> &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tradeInfo</span>.<span class="property">id</span> ? <span class="string">&quot;修改品牌失败&quot;</span> : <span class="string">&quot;添加品牌失败&quot;</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="修改品牌"><a href="#修改品牌" class="headerlink" title="修改品牌"></a>修改品牌</h3><ol>
<li>作用域插槽中的 row 就是对应品牌的信息，传递给修改对应的回调</li>
<li>在回调中将对应的值同步到 data 进行展示（注意此处<code>浅拷贝</code>，防止表格数据直接被修改）</li>
<li>点击确定刷新列表时，保持之前的页码</li>
<li>dialog title 根据 tradeInfo 中是否包含 id 动态展示 <code>:title=&quot;tradeInfo.id ? &#39;修改品牌&#39; : &#39;添加品牌&#39;&quot;</code></li>
</ol>
<h3 id="dialog-表单验证"><a href="#dialog-表单验证" class="headerlink" title="dialog 表单验证"></a>dialog 表单验证</h3><blockquote>
<p>Form 组件提供了表单验证的功能，只需要通过 rules 属性传入约定的验证规则，并将 Form-Item 的 prop 属性设置为需校验的字段名即可</p>
</blockquote>
<ol>
<li>编写 rules 表单验证规则<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dialog 表单验证规则</span></span><br><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">  <span class="attr">tmName</span>: [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;请输入品牌名称&quot;</span>, <span class="attr">trigger</span>: <span class="string">&quot;change&quot;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">min</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">max</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;长度在 1 到 10 个字符&quot;</span>,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&quot;change&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">logoUrl</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;请上传品牌Logo&quot;</span> &#125;],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li>Form-Item prop 属性设置为需校验的字段名</li>
<li>在确定按钮的回调函数中进行判断，如果表单校验成功则发送请求<ol>
<li>给 Form 标识一个 ref</li>
<li>获取表单，并通过 validate 回调函数返回的布尔值判断表单验证是否通过<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">trademarkForm</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> (valid) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 校验成功</span></span><br><span class="line">  <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$API</span>.<span class="property">trademark</span>.<span class="title function_">reqAddOrUpdateTradeMark</span>(</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tradeInfo</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tradeInfo</span>.<span class="property">id</span> ? <span class="string">&quot;修改品牌成功&quot;</span> : <span class="string">&quot;添加品牌成功&quot;</span></span><br><span class="line">      );</span><br><span class="line">      <span class="comment">// 刷新列表</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getTradeMarkList</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tradeInfo</span> = &#123; <span class="attr">tmName</span>: <span class="string">&quot;&quot;</span>, <span class="attr">logoUrl</span>: <span class="string">&quot;&quot;</span> &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tradeInfo</span>.<span class="property">id</span> ? <span class="string">&quot;修改品牌失败&quot;</span> : <span class="string">&quot;添加品牌失败&quot;</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 校验失败</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;error submit!!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h3 id="删除品牌"><a href="#删除品牌" class="headerlink" title="删除品牌"></a>删除品牌</h3><ol>
<li>编写删除品牌接口。（API: /admin/product/baseTrademark/remove/{id} method: DELETE)</li>
<li>删除回调传递作用域插槽中的 row （品牌信息）</li>
<li>messagebox 弹出框确认删除中调用接口。</li>
</ol>
<h2 id="属性管理"><a href="#属性管理" class="headerlink" title="属性管理"></a>属性管理</h2><h3 id="三级联动动态数据"><a href="#三级联动动态数据" class="headerlink" title="三级联动动态数据"></a>三级联动动态数据</h3><ol>
<li>编写获取分类相关 API（二级分类根据一级分类id获取，三级分类根据二级分类id获取）<ol>
<li>GET /admin/product/getCategory1</li>
<li>GET /admin/product/getCategory2/{category1Id}</li>
<li>GET /admin/product/getCategory3/{category2Id}</li>
</ol>
</li>
<li>三级联动组件 mounted 生命周期函数中调用获取一级分类方法，获取的数据存储在 data 中</li>
<li>el-option 组件循环渲染数据展示，并通过 el-option 的 <code>:value</code> 属性收集一级分类的 id，保存于 data 自定义对象中，el-select v-model 绑定这个 id</li>
<li>一级分类 el-option 绑定 change 事件，事件回调中根据 id 获取二级分类列表并渲染</li>
<li>二级分类 el-option 绑定 change 事件，事件回调中根据 id 获取三级分类列表并渲染</li>
<li>三级分类 el-option 绑定 change 事件</li>
<li>一二级分类<code>二次选择清空逻辑</code><ol>
<li>当一级分类发生变化，清空二三级数据列表与 id</li>
<li>当二级分类发生变化，清空三级数据列表与 id</li>
</ol>
</li>
</ol>
<h3 id="获取分类属性"><a href="#获取分类属性" class="headerlink" title="获取分类属性"></a>获取分类属性</h3><p>商品基础属性接口 API: /admin/product/attrInfoList/{category1Id}/{category2Id}/{category3Id}<br>Method: GET</p>
<ol>
<li>分类 change 事件回调中将分类 id 通过<code>自定义事件</code>发送给父组件，并<code>加上标识</code>用于区分一二三级分类</li>
<li>attrManage 父组件在自定义事件回调中接收到传过来的 id，并保存，</li>
<li>收集完毕，调用接口请求数据</li>
<li>数据在 attrManage 组件表格中展示</li>
</ol>
<h3 id="添加属性按钮功能"><a href="#添加属性按钮功能" class="headerlink" title="添加属性按钮功能"></a>添加属性按钮功能</h3><ol>
<li>禁用效果：三级分类 id 没有的情况下，禁用状态。</li>
<li>点击添加按钮 attrManage 表格组件隐藏，添加属性组件显示（使用变量控制）</li>
</ol>
<h3 id="收集组件中的属性"><a href="#收集组件中的属性" class="headerlink" title="收集组件中的属性"></a>收集组件中的属性</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice/main/img/20221024104532.png" alt="20221024104532"></p>
<p>添加属性与属性值接口 API: /admin/product/saveAttrInfo<br>Method: POST<br>参数描述：（saveAttrInfo）<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;attrName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 属性名</span></span><br><span class="line">  <span class="comment">// 相关属性值列表</span></span><br><span class="line">  <span class="attr">&quot;attrValueList&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;attrId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="comment">// 属性名的 id (归属于哪个属性名)</span></span><br><span class="line">      <span class="attr">&quot;valueName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span> <span class="comment">// 属性值</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;categoryId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="comment">// 分类3 id</span></span><br><span class="line">  <span class="attr">&quot;categoryLevel&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>收集属性逻辑：</p>
<ol>
<li>收集属性名<ol>
<li>v-model 双向绑定到 data 中</li>
</ol>
</li>
<li>收集属性值<ol>
<li>属性值表格数据 data 绑定到 attrValueList，表格根据 attrValueList 数组内容而呈现</li>
<li>属性值名称使用作用域插槽回传 attrValueList 中对应元素，插槽中放 el-input 数据双向绑定到回传数据的 valueName 属性</li>
<li>添加属性值按钮<ol>
<li>禁用条件：<code>:disabled=&quot;!attrInfo.attrName.trim().length&quot;</code></li>
<li>点击事件 attrValueList push 一个新元素 <code>&#123; attrId: undefined, valueName: &quot;&quot;,&#125;</code></li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="取消按钮数据回显问题"><a href="#取消按钮数据回显问题" class="headerlink" title="取消按钮数据回显问题"></a>取消按钮数据回显问题</h3><blockquote>
<p>解决添加属性操作中，上次的数据遗留问题</p>
</blockquote>
<ol>
<li>给添加属性按钮绑定事件</li>
<li>回调函数中初始化data中的数据<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addAttrHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">isShowAttrInfo</span> = <span class="literal">true</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">attrInfo</span> = &#123;</span><br><span class="line">    <span class="attr">attrName</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">attrValueList</span>: [],</span><br><span class="line">    <span class="comment">// 注意此处的三级分类 id 只能在这里获取，不能在 data 中获取，因为对象中的数据是无序排列的</span></span><br><span class="line">    <span class="attr">categoryId</span>: <span class="variable language_">this</span>.<span class="property">catInfo</span>.<span class="property">catList3id</span>,</span><br><span class="line">    <span class="attr">categoryLevel</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="修改属性操作"><a href="#修改属性操作" class="headerlink" title="修改属性操作"></a>修改属性操作</h3><ol>
<li>修改属性按钮添加回调，传入作用域插槽中的 row 对象</li>
<li>将传过来的对象<strong>深拷贝</strong>，并赋值给 attrInfo (注意此处不能直接赋值,否则他们用的都是同一个地址)</li>
</ol>
<h3 id="查看模式与编辑模式操作"><a href="#查看模式与编辑模式操作" class="headerlink" title="查看模式与编辑模式操作"></a>查看模式与编辑模式操作</h3><p>编辑并添加属性值操作: 新添加的属性值 id 应该为<code>对应编辑的属性值 id</code>: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">attrInfo</span>.<span class="property">attrValueList</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="comment">// attrId: undefined,</span></span><br><span class="line">  <span class="attr">attrId</span>: <span class="variable language_">this</span>.<span class="property">attrInfo</span>.<span class="property">id</span>,</span><br><span class="line">  <span class="attr">valueName</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="编辑模式与查看模式"><a href="#编辑模式与查看模式" class="headerlink" title="编辑模式与查看模式"></a>编辑模式与查看模式</h4><p>属性值名称编辑模式与查看模式（input or span 切换）:</p>
<ol>
<li>定义变量：flag (注意这个变量不能定义在 data 中，而是定义在添加的属性值对象上)<ol>
<li>input 失去焦点（<code>@blur</code>）或者回车（<code>@keyup.native.enter</code>） 对应属性值对象 flag 改变状态</li>
<li>span 点击事件，对应属性值对象 flag 改变状态</li>
</ol>
</li>
<li>使用 v-if 与 v-else 属性值对象身上变量 flag 切换 input or span 显示模式</li>
</ol>
<h4 id="编辑模式优化"><a href="#编辑模式优化" class="headerlink" title="编辑模式优化"></a>编辑模式优化</h4><ol>
<li>编辑模式下之前的属性没有 flag<ol>
<li>编辑事件回调中是直接对服务器的数据进行了深拷贝，而服务器数据中没有我们自定义的 flag 属性</li>
<li>深拷贝之后，对拷贝过来的对象进行遍历，使用 <code>$set</code> 方法对对象添加响应式数据。</li>
</ol>
</li>
<li>由编辑模式切换查看模式 input 输入框内容判断<ol>
<li>不能为空<ol>
<li>input 失去焦点（<code>@blur</code>）回调函数中对 row 的值进行判断</li>
<li>如果为空，就直接 return 一个弹出框提示用户</li>
</ol>
</li>
<li>不能有重复的属性值<ol>
<li>input 失去焦点（<code>@blur</code>）回调函数中对整个数组使用 some 方法进行判断（<code>排除自身</code>进行判断, 用自身的这个元素和数组中每一个元素比较）</li>
<li>如果结果为 false 则说明有重复的元素，return 一个弹出框提示用户</li>
</ol>
</li>
</ol>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 属性值表单失去焦点事件 (写的太优雅!)</span></span><br><span class="line"><span class="title function_">attrInfoBlurHandler</span>(<span class="params">row</span>) &#123;</span><br><span class="line">  <span class="comment">// 属性值不能为空判断</span></span><br><span class="line">  <span class="keyword">if</span> (!row.<span class="property">valueName</span>.<span class="title function_">trim</span>()) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.$message(<span class="string">&quot;属性值不能为空！&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 不能有重复的属性值判断</span></span><br><span class="line">  <span class="keyword">let</span> isRepeat = <span class="variable language_">this</span>.<span class="property">attrInfo</span>.<span class="property">attrValueList</span>.<span class="title function_">some</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 排除自身进行判断</span></span><br><span class="line">    <span class="keyword">if</span> (row != item) &#123;</span><br><span class="line">      <span class="comment">// 返回的是一个布尔值</span></span><br><span class="line">      <span class="keyword">return</span> item.<span class="property">valueName</span> == row.<span class="property">valueName</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">if</span> (isRepeat) &#123;</span><br><span class="line">    <span class="comment">// 删除这个重复的元素</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">attrInfo</span>.<span class="property">attrValueList</span>.<span class="title function_">pop</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;属性值不能重复！&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  row.<span class="property">flag</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h4 id="表单元素自动聚焦"><a href="#表单元素自动聚焦" class="headerlink" title="表单元素自动聚焦"></a>表单元素自动聚焦</h4><p>由查看模式切换为编辑模式自动聚焦：</p>
<ol>
<li>给 input 元素打一个 ref 属性，属性值是 $index</li>
<li>点击 span 标签回调函数中传入$index索引，用于获取 input 标签</li>
<li>在 <code>nextTick 函数</code>中获取 input 并调用 focus 方法</li>
</ol>
<p>点击添加属性值按钮自动聚焦：</p>
<ol>
<li>在添加属性值按钮回调函数中使用 nextTick 方法获取当前属性列表<code>数组中最后一个 input 元素</code>。</li>
<li>为最后一个 input 元素调用 focus 方法</li>
</ol>
<h3 id="删除属性名称"><a href="#删除属性名称" class="headerlink" title="删除属性名称"></a>删除属性名称</h3><p>API: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  API: /admin/product/deleteAttr/&#123;attrId&#125;</span></span><br><span class="line"><span class="comment">  Method: DELETE</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">reqDeleteAttr</span> = (<span class="params">attrId</span>) =&gt; <span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">`/admin/product/deleteAttr/<span class="subst">$&#123;attrId&#125;</span>`</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;DELETE&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>删除属性名称按钮绑定事件,并传入要删除的 attrId 调用接口</p>
<h3 id="删除属性值名称"><a href="#删除属性值名称" class="headerlink" title="删除属性值名称"></a>删除属性值名称</h3><ol>
<li>删除点击弹出 Popconfirm 气泡确认框组件<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;prop&quot;</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">width</span>=<span class="string">&quot;width&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;&#123; row, $index &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-popconfirm</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:title</span>=<span class="string">&quot;`确定删除$&#123;row.valueName&#125;?`&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">onConfirm</span>=<span class="string">&quot;attrInfoDeleteHandler($index)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">icon</span>=<span class="string">&quot;el-icon-delete&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">&quot;reference&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-popconfirm</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>回调函数中根据索引删除数组对应元素<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">attrInfoDeleteHandler</span>(<span class="params">index</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">attrInfo</span>.<span class="property">attrValueList</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="添加属性与修改属性保存操作"><a href="#添加属性与修改属性保存操作" class="headerlink" title="添加属性与修改属性保存操作"></a>添加属性与修改属性保存操作</h3><h4 id="保存数据API"><a href="#保存数据API" class="headerlink" title="保存数据API"></a>保存数据API</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  API: /admin/product/saveAttrInfo</span></span><br><span class="line"><span class="comment">  Method: POST</span></span><br><span class="line"><span class="comment">  参数格式:</span></span><br><span class="line"><span class="comment">  &#123;</span></span><br><span class="line"><span class="comment">    &quot;attrName&quot;: &quot;string&quot;,</span></span><br><span class="line"><span class="comment">    &quot;attrValueList&quot;: [</span></span><br><span class="line"><span class="comment">      &#123;</span></span><br><span class="line"><span class="comment">        &quot;attrId&quot;: 0,</span></span><br><span class="line"><span class="comment">        &quot;valueName&quot;: &quot;string&quot;</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment">    ],</span></span><br><span class="line"><span class="comment">    &quot;categoryId&quot;: 0,</span></span><br><span class="line"><span class="comment">    &quot;categoryLevel&quot;: 0,</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">reqaddOrUpdateAttrSave</span> = (<span class="params">data</span>) =&gt; <span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">`/admin/product/saveAttrInfo`</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">  data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="保存操作逻辑"><a href="#保存操作逻辑" class="headerlink" title="保存操作逻辑"></a>保存操作逻辑</h4><p>保存按钮中对数据进行<code>整理</code></p>
<ol>
<li>如果属性值为空，则不需要提交给服务器</li>
<li>不需要传递 flag 属性</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 保存按钮</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">addOrUpdateAttrSave</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">/* </span></span><br><span class="line"><span class="comment">  整理参数</span></span><br><span class="line"><span class="comment">    1. 如果属性值为空，则不需要提交给服务器</span></span><br><span class="line"><span class="comment">    2. 不需要传递 flag 属性</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">attrInfo</span>.<span class="property">attrValueList</span> = <span class="variable language_">this</span>.<span class="property">attrInfo</span>.<span class="property">attrValueList</span>.<span class="title function_">filter</span>(</span><br><span class="line">    <span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!item.<span class="property">valueName</span> == <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">delete</span> item.<span class="property">flag</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// 发请求</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$API</span>.<span class="property">attrmanage</span>.<span class="title function_">reqaddOrUpdateAttrSave</span>(</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">attrInfo</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getAttrInfoList</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;保存成功!&quot;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isShowAttrInfo</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;保存失败!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="最后优化"><a href="#最后优化" class="headerlink" title="最后优化"></a>最后优化</h3><h4 id="三级联动禁用状态"><a href="#三级联动禁用状态" class="headerlink" title="三级联动禁用状态"></a>三级联动禁用状态</h4><p>当点击添加属性,展示属性表格隐藏的时候,三级联动禁用</p>
<ol>
<li>通过 <code>props</code> 将 <code>isShowAttrInfo</code> (控制属性表格显示与隐藏) 的变量<code>取反</code>传递给三级联动组件</li>
<li>三级联动组件 el-select 的禁用状态<code>通过这个变量来控制</code></li>
</ol>
<h4 id="保存按钮禁用状态"><a href="#保存按钮禁用状态" class="headerlink" title="保存按钮禁用状态"></a>保存按钮禁用状态</h4><p>如果属性值列表为空,则保存按钮为禁用状态 <code>:disabled=&quot;attrInfo.attrValueList.length &lt; 1&quot;</code></p>
<h2 id="SPU-管理"><a href="#SPU-管理" class="headerlink" title="SPU 管理"></a>SPU 管理</h2><h3 id="静态组件"><a href="#静态组件" class="headerlink" title="静态组件"></a>静态组件</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice/main/img/20221026223510.png" alt="20221026223510"></p>
<p>顶部：三级联动</p>
<p>底部：底部会有三部分进行切换: 通过定义数字 scene: <code>0 1 2</code> 来判断加载哪个场景</p>
<ol>
<li>SPU 列表结构【场景0】<ol>
<li>索引</li>
<li>SPU 名称</li>
<li>SPU 描述</li>
<li>操作(按钮)<ol>
<li>添加</li>
<li>编辑</li>
<li>信息</li>
<li>删除</li>
</ol>
</li>
<li>分页</li>
</ol>
</li>
<li>添加 / 修改 SPU (拆分成一个组件)【场景1】<ol>
<li>SPU名称</li>
<li>品牌</li>
<li>SPU描述</li>
<li>SPU图片（照片墙）</li>
<li>销售属性</li>
<li>保存/取消按钮</li>
</ol>
</li>
<li>添加 SKU (拆分成一个组件)【场景2】<ol>
<li>SPU名称</li>
<li>SKU名称</li>
<li>价格（元）</li>
<li>重量（千克）</li>
<li>规格描述</li>
<li>平台属性</li>
<li>销售属性</li>
<li>图片列表</li>
<li>保存/取消按钮</li>
</ol>
</li>
</ol>
<h3 id="SPU-列表结构"><a href="#SPU-列表结构" class="headerlink" title="SPU 列表结构"></a>SPU 列表结构</h3><h4 id="API-1"><a href="#API-1" class="headerlink" title="API"></a>API</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  API: /admin/product/&#123;page&#125;/&#123;limit&#125;</span></span><br><span class="line"><span class="comment">  Method: GET</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">reqGetSpuList</span> = (<span class="params">page, limit, category3Id</span>) =&gt; <span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">`/admin/product/<span class="subst">$&#123;page&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    category3Id</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="展示逻辑"><a href="#展示逻辑" class="headerlink" title="展示逻辑"></a>展示逻辑</h4><ol>
<li>三级分类选择完成调用接口，获取数据，渲染数据</li>
<li>SPU 列表操作按钮有鼠标 hover 提示效果.（两种方案）<ol>
<li>使用 el-tooltip 组件包裹按钮</li>
<li>封装自定义按钮组件。<code>HintButton</code></li>
</ol>
</li>
<li>分页器数据绑定事件绑定</li>
</ol>
<h4 id="信息-info"><a href="#信息-info" class="headerlink" title="信息 info"></a>信息 info</h4><p>接口：GET /admin/product/findBySpuId/{spuId}</p>
<p>点击 info 按钮会通过 dialog 对话框展示当前 spu 的 所有 sku</p>
<ol>
<li>dialog 嵌套表格</li>
<li>title 动态</li>
<li>根据 spu id 信息发请求获取 sku 列表数据</li>
<li>保存数据，渲染数据</li>
</ol>
<p>loading 效果：</p>
<blockquote>
<p>Loading 加载 <a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/loading">https://element.eleme.cn/#/zh-CN/component/loading</a></p>
</blockquote>
<h4 id="删除-SPU"><a href="#删除-SPU" class="headerlink" title="删除 SPU"></a>删除 SPU</h4><p>删除场景 0 中的数据</p>
<ol>
<li>点击删除按钮传递 Row，（根据row中的spuid删除数据）</li>
<li>在回调中发送请求删除数据</li>
<li>删除成功后重新获取列表数据</li>
</ol>
<h3 id="添加-修改-SPU-组件数据请求与绑定【难点】"><a href="#添加-修改-SPU-组件数据请求与绑定【难点】" class="headerlink" title="添加 / 修改 SPU 组件数据请求与绑定【难点】"></a>添加 / 修改 SPU 组件数据请求与绑定【难点】</h3><h4 id="修改-SPU-组件数据获取与展示逻辑"><a href="#修改-SPU-组件数据获取与展示逻辑" class="headerlink" title="修改 SPU 组件数据获取与展示逻辑"></a>修改 SPU 组件数据获取与展示逻辑</h4><p>数据获取：</p>
<ol>
<li>点击修改按钮 spuEdit 子组件需要发送四个请求：<ol>
<li>品牌信息 数据：GET /admin/product/baseTrademark/getTrademarkList</li>
<li>获取平台所有销售属性：GET /admin/product/baseSaleAttrList</li>
<li>根据 id 获取spu数据：GET /admin/product/getSpuById/{spuId}</li>
<li>根据 id 获取spu图片：GET /admin/product/spuImageList/{spuId}</li>
</ol>
</li>
<li>取消按钮点击事件：展示 <code>scene：0</code> SPU 列表结构场景<ol>
<li>通过自定义事件将数字 0 传递给父组件，父组件同步到 data</li>
</ol>
</li>
<li>spuEdit 子组件什么时候发请求？（不可以在mounted生命周期中发，因为只会执行一次。）<ol>
<li>在编辑按钮事件中发请求。（每次点击都会发请求）</li>
<li>给 spuEdit 子组件打一个 ref</li>
<li>在编辑按钮事件回调中获取子组件，调用组件身上初始化数据的接口函数（注意此处用了 v-if 展示子组件，所以需要使用 nextTick 函数获取，否则获取不到）</li>
</ol>
</li>
</ol>
<p>数据展示：</p>
<blockquote>
<p>此处不仅要考虑<code>如何展示数据</code>，还要考虑<code>如何收集数据</code></p>
</blockquote>
<p>整个表单数据绑定到 spuInfo 对象上：<code>:model=&quot;spuInfo&quot;</code></p>
<ol>
<li>SPU名称<ol>
<li>v-model</li>
</ol>
</li>
<li>品牌<ol>
<li><code>el-select</code> 收集到的数据双向绑定到 <code>spuInfo.tmId</code> 中</li>
<li>循环渲染数据源为 tradeMarkList，收集的数据为 item.id</li>
</ol>
</li>
<li>SPU描述<ol>
<li>双向数据绑定到 <code>spuInfo.description</code> 字段</li>
</ol>
</li>
<li>SPU图片（照片墙）<ol>
<li>数据展示<ol>
<li>需要使用 <code>:file-list=&quot;spuImages&quot;</code> 字段指定要展示的数据源，<ol>
<li>fileList 是一个数组对象</li>
<li>对象中包含两个属性：name url</li>
</ol>
</li>
<li>而服务器返回的数据中没有这两个属性，所以在保存服务器返回的数据之前，需要对数据进行处理，加上 name url 字段</li>
</ol>
</li>
<li>图片数据收集<ol>
<li>照片墙删除事件：<code>:on-remove=&quot;handleRemove&quot;</code> 会注入两个参数：file(被删除的元素)、fileList(删除后剩余的元素) 将 fileList(删除后剩余的元素) 保存在 data 中</li>
<li>照片墙上传图片：<code>:on-success=&quot;handleSpuImgSuccess&quot;</code> 会注入三个参数：response、file、filelist 其中 filelist 是上传成功后所有的图片数据，将其保存在 data 中</li>
<li>数据整理</li>
</ol>
</li>
</ol>
</li>
<li>销售属性【难点】<ol>
<li>销售属性 select 选择【展示】<ol>
<li>使用计算属性: 计算出还没有被选中的销售属性(平台一共有三个属性)使用计算出来的数据进行渲染，数据绑定在变量：spuSaleAttr<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;spuSaleAttr&quot;</span> <span class="attr">:placeholder</span>=<span class="string">&quot;`还有$&#123;getNoSelectSaleAttr.length&#125;个属性`&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">&quot;item in getNoSelectSaleAttr&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:label</span>=<span class="string">&quot;item.name&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:value</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line"><span class="title function_">getNoSelectSaleAttr</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="variable language_">this</span>.<span class="property">baseSaleAttrList</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">spuInfo</span>.<span class="property">spuSaleAttrList</span>.<span class="title function_">every</span>(<span class="function">(<span class="params">item2</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> item2.<span class="property">saleAttrName</span> != item1.<span class="property">name</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li>添加销售属性按钮禁用事件：<code>:disabled=&quot;!spuSaleAttr&quot;</code> (spuSaleAttr 是 el-select 双向绑定的变量，el-select 没有选中属性，按钮就是禁用状态)</li>
</ol>
</li>
<li>table 组件【展示】: 已有销售属性(数据源绑定到 spuInfo.spuSaleAttrList)<ol>
<li>属性名</li>
<li>属性名称列表<ol>
<li>使用 Tag 动态编辑标签组件展示</li>
<li>Tag 标签中的 input 和 按钮之间的切换</li>
</ol>
</li>
<li>操作</li>
</ol>
</li>
<li>销售属性操作<ol>
<li>添加销售属性名<ol>
<li>收集 el-select 双向绑定的数据：<code>:value=&quot;</code>${item.id}:${item.name}<code>&quot;</code></li>
<li>添加销售属性按钮点击事件：<ol>
<li>对以上收集到的数据进行处理（split(“:”)）</li>
<li>处理完成后将数据添加到 <code>属性名 el-table</code> 的数据源上: <code>spuInfo.spuSaleAttrList</code>(pushh)</li>
</ol>
</li>
<li>相关字段<ol>
<li>baseSaleAttrId</li>
<li>saleAttrName</li>
<li>spuSaleAttrValueList</li>
</ol>
</li>
</ol>
</li>
<li>展示 / 收集销售属性值<ol>
<li><code>+ New Tag</code> 按钮点击事件：<ol>
<li>给每一个 row 添加一个 <code>inputVisible</code> 属性，用于控制 input 和 span 状态的切换（注意此处要用 $set 方法为 row 添加响应式数据）</li>
<li>收集用户输入 input 中的数据（注意此处要用 $set 方法为 <code>row</code> 添加响应式数据）数据双向绑定到这个响应式数据</li>
</ol>
</li>
<li>input 失去焦点：<ol>
<li>inputVisible 属性为 false（由输入框变为 span）</li>
<li>将 input 中的数据整合并添加到  el-tag 绑定的数据源，字段格式：<ol>
<li>baseSaleAttrId</li>
<li>saleAttrValueName</li>
</ol>
</li>
</ol>
</li>
<li>input 失去焦点数据校验：<ol>
<li>属性值不能为空</li>
<li>属性值不能重复</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>删除操作<ol>
<li>删除 Tag<ol>
<li>使用 splice 方法根据索引删除 <code>row.spuSaleAttrValueList</code> 数组中的数据</li>
</ol>
</li>
<li>删除整个 Row<ol>
<li>使用 splice 方法根据索引删除 spuSaleAttrList 数组中的数据</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>三级联动操作性<ol>
<li>除了场景 0 以外都不可以操作三级联动</li>
</ol>
</li>
<li>保存操作<ol>
<li>修改和添加 SPU 封装成同一个请求（除了添加 SPU 接口参数<code>不携带 id</code> 外，其他参数都和修改接口一样）<ol>
<li>POST /admin/product/updateSpuInfo</li>
<li>POST /admin/product/saveSpuInfo</li>
</ol>
</li>
<li>整理参数【难点】<ol>
<li>对照片墙收集到的数据进行整理<ol>
<li>必须有 <code>imgName</code> 和 <code>imgUrl</code> 字段，新上传的图片没有这两个字段（但是有 name 和 url 字段），所以需要对新上传的数据进行处理。</li>
<li>使用数组 map 方法对原数组进行处理，返回处理后的数组，覆盖原数组</li>
</ol>
</li>
</ol>
</li>
<li>发请求</li>
<li>弹出 message 并回到场景 0，然后父组件中刷新场景 0 中的数据</li>
</ol>
</li>
</ol>
<h4 id="添加-SPU-数据逻辑"><a href="#添加-SPU-数据逻辑" class="headerlink" title="添加 SPU 数据逻辑"></a>添加 SPU 数据逻辑</h4><p>因为添加 SPU 中 spuInfo 对象没有被初始化是空对象。不利于后期收集数据，所以在 data 中直接将 spuInfo 对象根据接口参数初始化。<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;category3Id&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;spuImageList&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;imgName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;imgUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spuId&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;spuName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;spuSaleAttrList&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;baseSaleAttrId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;saleAttrName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spuId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spuSaleAttrValueList&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;baseSaleAttrId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;isChecked&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;saleAttrName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;saleAttrValueName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;spuId&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tmId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>添加 SPU 数据</p>
<ol>
<li>点击添加按钮 spuEdit 子组件需要发送两个请求初始化组件 select：<ol>
<li>品牌信息 数据：GET /admin/product/baseTrademark/getTrademarkList</li>
<li>获取平台所有销售属性：GET /admin/product/baseSaleAttrList</li>
</ol>
</li>
<li>三级分类 id 传递给子组件，初始化 data 中的数据</li>
<li>添加完成后跳转到场景 0 的 第一页</li>
</ol>
<h3 id="添加-SKU"><a href="#添加-SKU" class="headerlink" title="添加 SKU"></a>添加 SKU</h3><ol>
<li>传递参数 <code>row</code> 和 <code>categoryId</code> 并切换为场景 2</li>
<li>父组件通知子组件（ref获取子节点调用方法）发送请求初始化组件数据<ol>
<li>根据 Id 获取图片数据 GET /admin/product/spuImageList/{spuId}</li>
<li>根据 Id 获取销售属性 GET /admin/product/spuSaleAttrList/{spuId}</li>
<li>根据 Id 获取平台属性 GET /admin/product/attrInfoList/{category1Id}/{category2Id}/{category3Id}</li>
</ol>
</li>
<li>将接口请求的数据分别保存在 data 中</li>
<li>数据展示与收集<ol>
<li>SPU名称</li>
<li>SKU名称</li>
<li>价格（元）<ol>
<li>type = “number”</li>
</ol>
</li>
<li>重量（千克）</li>
<li>规格描述</li>
<li>平台属性 【难点】<ol>
<li>有两个 select 数据是动态的（使用循环渲染出来）</li>
<li>使用模板字符串<code>收集到平台属性对象身上</code></li>
</ol>
</li>
<li>销售属性<ol>
<li>使用循环渲染</li>
<li>使用模板字符串<code>收集到平台属性对象身上</code></li>
</ol>
</li>
<li>图片列表（数据展示与收集）<ol>
<li>绑定数据源，使用 table 渲染</li>
<li>selection 的事件获取被勾选的 row（数组）存储在 data 中需要收集发给服务器的参数：<ol>
<li>imgName </li>
<li>imgurl</li>
<li>spuImgId</li>
<li>isDefault（控制是不是默认图片）</li>
</ol>
</li>
<li>图片使用作用域插槽读取展示</li>
<li>两个按钮（设为默认、默认）<ol>
<li>数据默认没有 isDefault 字段，所以在服务器返回数据存储之前，对数据进行处理，添加 isDefault 字段：默认值为 0</li>
<li>按钮根据 isDefault 字段的值进行 v-if 展示</li>
<li>按钮点击事件，使用排他操作（只能有一张图片设置为默认图）</li>
<li>收集默认图片地址</li>
</ol>
</li>
</ol>
</li>
<li>保存/取消按钮<ol>
<li>保存：发请求</li>
<li>取消: 切换场景【清除数据】</li>
</ol>
</li>
</ol>
</li>
<li>保存 SKU<ol>
<li>接口：POST /admin/product/saveSkuInfo</li>
<li>参数格式：<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;category3Id&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;createTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-10-22T13:40:27.515Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;isSale&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;skuAttrValueList&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;attrId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;attrName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skuId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;valueId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;valueName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;skuDefaultImg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;skuDesc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;skuImageList&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;imgName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;imgUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skuId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spuImgId&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;skuName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;skuSaleAttrValueList&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;saleAttrId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;saleAttrName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;saleAttrValueId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;saleAttrValueName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skuId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spuId&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;spuId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tmId&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;weight&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>整理参数【难点】<ol>
<li>平台属性数据整理<ol>
<li>forEach</li>
<li>reduce</li>
</ol>
</li>
<li>销售属性数据整理<ol>
<li>forEach</li>
<li>reduce</li>
</ol>
</li>
<li>图片数据整理</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="SKU-管理"><a href="#SKU-管理" class="headerlink" title="SKU 管理"></a>SKU 管理</h2><h3 id="静态组件-1"><a href="#静态组件-1" class="headerlink" title="静态组件"></a>静态组件</h3><ol>
<li>el-table 展示数据，相关字段：<ol>
<li>序号</li>
<li>名称</li>
<li>描述</li>
<li>默认图片</li>
<li>重量（KG)</li>
<li>价格（元）</li>
<li>操作<ol>
<li>上架 （根据 row.isSale 属性展示）</li>
<li>下架 （根据 row.isSale 属性展示）</li>
<li>编辑<ol>
<li>正在开发中..</li>
</ol>
</li>
<li>信息</li>
<li>删除</li>
</ol>
</li>
</ol>
</li>
<li>分页</li>
</ol>
<h3 id="渲染数据"><a href="#渲染数据" class="headerlink" title="渲染数据"></a>渲染数据</h3><ol>
<li>接口：GET /admin/product/list/{page}/{limit}</li>
<li>初始化页码参数并绑定到 pagination</li>
<li>根据参数调用接口发送请求</li>
<li>el-table 操作区域按钮<ol>
<li>上下架操作<ol>
<li>接口：<ol>
<li>GET /admin/product/onSale/{skuId}</li>
<li>GET /admin/product/cancelSale/{skuId}</li>
</ol>
</li>
</ol>
</li>
<li>信息按钮<ol>
<li>Drawer 抽屉进行展示</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><blockquote>
<p>值得参考的权限管理文章：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6949453195987025927#heading-8">https://juejin.cn/post/6949453195987025927#heading-8</a></p>
</blockquote>
<p>通过给项目引入了权限控制方案,可以满足我们灵活的调整用户访问相关页面的许可。<br>比如哪些页面向游客开放,哪些页面必须要登录后才能访问,哪些页面只能被某些角色访问(比如超级管理员).有些页面即使用户登录了但受到角色的限制,他也只被允许看到页面的部分内容。</p>
<h3 id="路由权限管理"><a href="#路由权限管理" class="headerlink" title="路由权限管理"></a>路由权限管理</h3><p>不同的用户（角色）,<code>登录</code>的时候会向服务器发请求，<code>服务器会把用户相应的菜单的权限的信息，返回给我们我们可以根据服务器返回的数据（信息）</code>,可以动态的设置路由，可以根据不同的用户展示不同的菜单。</p>
<ol>
<li>当用户登录的时候，服务器端会返回相应角色的菜单权限的信息【数组】</li>
<li>把项目中的<code>路由进行拆分</code><ol>
<li>常量路由：就是不关用户是什么角色，都可以看见的路由</li>
<li>异步理由：不同的用户（角色），需要过滤筛选出的路由，称之为异步路由</li>
<li>任意路由：当路径出现错误的时候重定向 404</li>
</ol>
</li>
<li>项目中已有的异步路由，与服务器返回的标记信息<code>进行对比过滤</code>出最终需要展示的理由。<ol>
<li>定义一个函数使用 <code>filter 方法</code> + <code>递归</code> 计算出异步路由与服务器返回的路由，返回当前用户需要展示的异步路由</li>
<li>将计算出的路由信息<code>合并</code></li>
<li>给路由器添加新的路由</li>
</ol>
</li>
</ol>
<h3 id="路由权限管理（代码步骤）"><a href="#路由权限管理（代码步骤）" class="headerlink" title="路由权限管理（代码步骤）"></a>路由权限管理（代码步骤）</h3><ol>
<li>用户登录，服务器根据用户信息返回数据，其中包含了用户可以访问哪些权限的路由。保存这些信息。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice/main/img/20221106155010.png" alt="服务器根据用户信息返回数据"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice/main/img/20221106155625.png" alt="保存服务器返回的数据"></li>
<li>把项目中的<code>路由进行拆分</code><br>拆分前：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> constantRoutes = [&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/login/index&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/404&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/dashboard&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Dashboard&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/dashboard/index&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;dashboard&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 权限管理及子路由</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Acl&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/acl&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/acl/user/list&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;权限管理&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;el-icon-lock&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;User&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;user/list&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/acl/user/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;用户管理&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Role&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;role/list&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/acl/role/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;角色管理&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;RoleAuth&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;role/auth/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/acl/role/roleAuth&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123;</span><br><span class="line">          <span class="attr">activeMenu</span>: <span class="string">&#x27;/acl/role/list&#x27;</span>,</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;角色授权&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">hidden</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Permission&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;permission/list&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/acl/permission/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;菜单管理&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 商品管理及其子路由</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Product&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/product&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;商品管理&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;el-icon-goods&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 子路由</span></span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;trademark&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;TradeMark&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/product/tradeMark&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;品牌管理&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;attrmanage&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;AttrManage&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/product/attrManage&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;属性管理&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;spumanage&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;SpuManage&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/product/spuManage&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;SPU管理&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;skumanage&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;SkuManage&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/product/skuManage&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;SKU管理&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 404 page must be placed at the end !!!</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
拆分后：(1. 常量路由 2. 异步理由 3. 任意路由)<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 常量路由：就是不关用户是什么角色，都可以看见的路由</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> constantRoutes = [&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/login/index&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/404&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/dashboard&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Dashboard&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/dashboard/index&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;dashboard&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 404 page must be placed at the end !!!</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 异步路由：不同的用户（角色），需要过滤筛选出的路由，称之为异步路由</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> asyncRoutes = [</span><br><span class="line">  <span class="comment">// 权限管理及子路由</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Acl&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/acl&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/acl/user/list&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;权限管理&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;el-icon-lock&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;User&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;user/list&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/acl/user/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;用户管理&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Role&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;role/list&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/acl/role/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;角色管理&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;RoleAuth&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;role/auth/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/acl/role/roleAuth&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123;</span><br><span class="line">          <span class="attr">activeMenu</span>: <span class="string">&#x27;/acl/role/list&#x27;</span>,</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;角色授权&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">hidden</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Permission&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;permission/list&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/acl/permission/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;菜单管理&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 商品管理及其子路由</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Product&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/product&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;商品管理&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;el-icon-goods&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 子路由</span></span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;trademark&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;TradeMark&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/product/tradeMark&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;品牌管理&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;attrmanage&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;AttrManage&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/product/attrManage&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;属性管理&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;spumanage&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;SpuManage&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/product/spuManage&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;SPU管理&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;skumanage&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;SkuManage&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/product/skuManage&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;SKU管理&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 任意路由：当路径出现错误的时候重定向 404</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> anyRoutes = &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">  <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">  <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>项目中已有的异步路由，与服务器返回的标记信息<code>进行对比过滤</code>出最终需要展示的理由：<ol>
<li>在 vuex —&gt; user.js 中定义一个数组（resAsyncRoutes）存储对比之后【项目中已有的异步路由，与服务器返回的标记信息进行对比最终需要展示的理由】</li>
<li>在 vuex —&gt; user.js 中提交 mutation，计算服务器当前用户需要展示的路由<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actions</span></span><br><span class="line"><span class="title function_">commit</span>(<span class="string">&#x27;SET_RESASYNCROUTES&#x27;</span>, <span class="title function_">computedAsyncRoutes</span>(asyncRoutes, data.<span class="property">routes</span>))</span><br><span class="line"><span class="comment">// computedAsyncRoutes</span></span><br><span class="line"><span class="comment">// 定义一个函数：两个数组进行对比，对比出当前用户到底显示哪些异步路由</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">computedAsyncRoutes</span> = (<span class="params">asyncRoutes, routes</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> asyncRoutes.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (routes.<span class="title function_">indexOf</span>(item.<span class="property">name</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// 递归：每一个 item 还有子路由</span></span><br><span class="line">      <span class="keyword">if</span> (item.<span class="property">children</span> &amp;&amp; item.<span class="property">children</span>.<span class="property">length</span>) &#123;</span><br><span class="line">        item.<span class="property">children</span> = <span class="title function_">computedAsyncRoutes</span>(item.<span class="property">children</span>, routes)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>合并路由<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">state.<span class="property">resAllRoutes</span> = constantRoutes.<span class="title function_">concat</span>(state.<span class="property">resAsyncRoutes</span>, anyRoutes)</span><br></pre></td></tr></table></figure></li>
<li>在 vuex —&gt; user.js 中引入 router，并给路由器添加新的路由<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">addRoutes</span>(state.<span class="property">resAllRoutes</span>)</span><br></pre></td></tr></table></figure></li>
<li>修改 vue-admin-template 源码，将路由指定为 vuex 仓库中计算出来的路由<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># src&gt;layout&gt;components&gt;Sidebar&gt;index.vue</span><br><span class="line">computed: &#123;</span><br><span class="line"> routes() &#123;</span><br><span class="line"><span class="deletion">-   return this.$router.options.routes</span></span><br><span class="line"><span class="addition">+   return this.$store.state.user.resAllRoutes</span></span><br><span class="line"> &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="按钮权限管理"><a href="#按钮权限管理" class="headerlink" title="按钮权限管理"></a>按钮权限管理</h3><p>不同的用户（角色）,有的用户的是可见按钮、当然有的用户不可见。</p>
<p>实现思路：按钮的 v-show 显示与隐藏通过用户是否有这个权限来展示</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vue/">vue</a><a class="post-meta__tags" href="/tags/Project/">Project</a></div><div class="post_share"></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%9A%E5%93%81%E6%B1%87%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%AB%AF"><span class="toc-number">1.</span> <span class="toc-text">尚品汇后台管理端</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-admin-template"><span class="toc-number">1.1.</span> <span class="toc-text">vue-admin-template</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API-%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3"><span class="toc-number">1.2.</span> <span class="toc-text">API 接口文档</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%8E%A5%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.1.</span> <span class="toc-text">项目接口配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86%E8%B7%A8%E5%9F%9F"><span class="toc-number">1.2.2.</span> <span class="toc-text">配置代理跨域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.</span> <span class="toc-text">目录结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E7%9B%B8%E5%85%B3"><span class="toc-number">2.</span> <span class="toc-text">插件相关</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Element-UI"><span class="toc-number">2.1.</span> <span class="toc-text">Element-UI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99"><span class="toc-number">2.1.1.</span> <span class="toc-text">表单自定义校验规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Echarts"><span class="toc-number">2.2.</span> <span class="toc-text">Echarts</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E8%B7%AF%E7%94%B1%E6%90%AD%E5%BB%BA"><span class="toc-number">3.</span> <span class="toc-text">项目路由搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#views-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.</span> <span class="toc-text">views 目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">3.2.</span> <span class="toc-text">路由配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">4.</span> <span class="toc-text">全局组件封装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8"><span class="toc-number">4.1.</span> <span class="toc-text">三级联动</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E4%B8%8E%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95"><span class="toc-number">5.</span> <span class="toc-text">登录与退出登录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#API"><span class="toc-number">5.1.</span> <span class="toc-text">API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95"><span class="toc-number">5.2.</span> <span class="toc-text">登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95"><span class="toc-number">5.3.</span> <span class="toc-text">退出登录</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%95%86%E5%93%81%E7%AE%A1%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">商品管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86"><span class="toc-number">6.1.</span> <span class="toc-text">品牌管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%93%81%E7%89%8C%E5%88%97%E8%A1%A8-API"><span class="toc-number">6.1.1.</span> <span class="toc-text">请求品牌列表 API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#el-table-%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE"><span class="toc-number">6.1.2.</span> <span class="toc-text">el-table 组件渲染数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#el-pagination-%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">6.1.3.</span> <span class="toc-text">el-pagination 分页数据绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dialog"><span class="toc-number">6.1.4.</span> <span class="toc-text">dialog</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-%E4%BF%AE%E6%94%B9%E5%93%81%E7%89%8C-API"><span class="toc-number">6.1.5.</span> <span class="toc-text">添加&#x2F;修改品牌 API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%93%81%E7%89%8C"><span class="toc-number">6.1.6.</span> <span class="toc-text">添加品牌</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%93%81%E7%89%8C"><span class="toc-number">6.1.7.</span> <span class="toc-text">修改品牌</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dialog-%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81"><span class="toc-number">6.1.8.</span> <span class="toc-text">dialog 表单验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%93%81%E7%89%8C"><span class="toc-number">6.1.9.</span> <span class="toc-text">删除品牌</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%AE%A1%E7%90%86"><span class="toc-number">6.2.</span> <span class="toc-text">属性管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8%E5%8A%A8%E6%80%81%E6%95%B0%E6%8D%AE"><span class="toc-number">6.2.1.</span> <span class="toc-text">三级联动动态数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%88%86%E7%B1%BB%E5%B1%9E%E6%80%A7"><span class="toc-number">6.2.2.</span> <span class="toc-text">获取分类属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7%E6%8C%89%E9%92%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">6.2.3.</span> <span class="toc-text">添加属性按钮功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%B6%E9%9B%86%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">6.2.4.</span> <span class="toc-text">收集组件中的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E6%B6%88%E6%8C%89%E9%92%AE%E6%95%B0%E6%8D%AE%E5%9B%9E%E6%98%BE%E9%97%AE%E9%A2%98"><span class="toc-number">6.2.5.</span> <span class="toc-text">取消按钮数据回显问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%B1%9E%E6%80%A7%E6%93%8D%E4%BD%9C"><span class="toc-number">6.2.6.</span> <span class="toc-text">修改属性操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BC%96%E8%BE%91%E6%A8%A1%E5%BC%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">6.2.7.</span> <span class="toc-text">查看模式与编辑模式操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E6%A8%A1%E5%BC%8F%E4%B8%8E%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.2.7.1.</span> <span class="toc-text">编辑模式与查看模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E6%A8%A1%E5%BC%8F%E4%BC%98%E5%8C%96"><span class="toc-number">6.2.7.2.</span> <span class="toc-text">编辑模式优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0%E8%87%AA%E5%8A%A8%E8%81%9A%E7%84%A6"><span class="toc-number">6.2.7.3.</span> <span class="toc-text">表单元素自动聚焦</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%B1%9E%E6%80%A7%E5%90%8D%E7%A7%B0"><span class="toc-number">6.2.8.</span> <span class="toc-text">删除属性名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%B1%9E%E6%80%A7%E5%80%BC%E5%90%8D%E7%A7%B0"><span class="toc-number">6.2.9.</span> <span class="toc-text">删除属性值名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7%E4%B8%8E%E4%BF%AE%E6%94%B9%E5%B1%9E%E6%80%A7%E4%BF%9D%E5%AD%98%E6%93%8D%E4%BD%9C"><span class="toc-number">6.2.10.</span> <span class="toc-text">添加属性与修改属性保存操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AEAPI"><span class="toc-number">6.2.10.1.</span> <span class="toc-text">保存数据API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E6%93%8D%E4%BD%9C%E9%80%BB%E8%BE%91"><span class="toc-number">6.2.10.2.</span> <span class="toc-text">保存操作逻辑</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%90%8E%E4%BC%98%E5%8C%96"><span class="toc-number">6.2.11.</span> <span class="toc-text">最后优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8%E7%A6%81%E7%94%A8%E7%8A%B6%E6%80%81"><span class="toc-number">6.2.11.1.</span> <span class="toc-text">三级联动禁用状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E6%8C%89%E9%92%AE%E7%A6%81%E7%94%A8%E7%8A%B6%E6%80%81"><span class="toc-number">6.2.11.2.</span> <span class="toc-text">保存按钮禁用状态</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SPU-%E7%AE%A1%E7%90%86"><span class="toc-number">6.3.</span> <span class="toc-text">SPU 管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">6.3.1.</span> <span class="toc-text">静态组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SPU-%E5%88%97%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">6.3.2.</span> <span class="toc-text">SPU 列表结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#API-1"><span class="toc-number">6.3.2.1.</span> <span class="toc-text">API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E9%80%BB%E8%BE%91"><span class="toc-number">6.3.2.2.</span> <span class="toc-text">展示逻辑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF-info"><span class="toc-number">6.3.2.3.</span> <span class="toc-text">信息 info</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-SPU"><span class="toc-number">6.3.2.4.</span> <span class="toc-text">删除 SPU</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-%E4%BF%AE%E6%94%B9-SPU-%E7%BB%84%E4%BB%B6%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82%E4%B8%8E%E7%BB%91%E5%AE%9A%E3%80%90%E9%9A%BE%E7%82%B9%E3%80%91"><span class="toc-number">6.3.3.</span> <span class="toc-text">添加 &#x2F; 修改 SPU 组件数据请求与绑定【难点】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-SPU-%E7%BB%84%E4%BB%B6%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E4%B8%8E%E5%B1%95%E7%A4%BA%E9%80%BB%E8%BE%91"><span class="toc-number">6.3.3.1.</span> <span class="toc-text">修改 SPU 组件数据获取与展示逻辑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-SPU-%E6%95%B0%E6%8D%AE%E9%80%BB%E8%BE%91"><span class="toc-number">6.3.3.2.</span> <span class="toc-text">添加 SPU 数据逻辑</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-SKU"><span class="toc-number">6.3.4.</span> <span class="toc-text">添加 SKU</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SKU-%E7%AE%A1%E7%90%86"><span class="toc-number">6.4.</span> <span class="toc-text">SKU 管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%BB%84%E4%BB%B6-1"><span class="toc-number">6.4.1.</span> <span class="toc-text">静态组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE"><span class="toc-number">6.4.2.</span> <span class="toc-text">渲染数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">6.5.</span> <span class="toc-text">权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">6.5.1.</span> <span class="toc-text">路由权限管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%EF%BC%88%E4%BB%A3%E7%A0%81%E6%AD%A5%E9%AA%A4%EF%BC%89"><span class="toc-number">6.5.2.</span> <span class="toc-text">路由权限管理（代码步骤）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E9%92%AE%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">6.5.3.</span> <span class="toc-text">按钮权限管理</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: rgba(27, 27, 27, .5)"><div id="footer-wrap"><div class="copyright">&copy;2000 - 2023 By 曾庆生</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索 🎿</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  人家正在加载呢~</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="输入关键词 ..." type="text"/></div></div><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script src="/js/sun_moon.js" async></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/06/13A-TEMP/工具_EXCEL_EXCEL函数应用记录/bfa31c7a/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice_23/main/img/20230613115124.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-13</span><a class="blog-slider__title" href="2023/06/13A-TEMP/工具_EXCEL_EXCEL函数应用记录/bfa31c7a/" alt="">EXCEL函数应用记录</a><div class="blog-slider__text">emm...</div><a class="blog-slider__button" href="2023/06/13A-TEMP/工具_EXCEL_EXCEL函数应用记录/bfa31c7a/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/05/02工具/工具_手册_速查指令/efc31b2a/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/HaloBoys/PicGoMyDevice/img/shortcut.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-02</span><a class="blog-slider__title" href="2022/05/02工具/工具_手册_速查指令/efc31b2a/" alt="">速查指令</a><div class="blog-slider__text">软件 工具 常用指令集合</div><a class="blog-slider__button" href="2022/05/02工具/工具_手册_速查指令/efc31b2a/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/05/19工具/工具_手册_博客架构及编写规范/5f35053a/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice_23/main/img/20230311155239.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-19</span><a class="blog-slider__title" href="2022/05/19工具/工具_手册_博客架构及编写规范/5f35053a/" alt="">庆生的第二大脑架构及规范</a><div class="blog-slider__text">emm...</div><a class="blog-slider__button" href="2022/05/19工具/工具_手册_博客架构及编写规范/5f35053a/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/07/07工具/工具_手册_Bug记录及解决/10d28195/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HaloBoys/PicGoMyDevice_23/main/img/images%20(1).png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-07-07</span><a class="blog-slider__title" href="2022/07/07工具/工具_手册_Bug记录及解决/10d28195/" alt="">Bug记录及解决</a><div class="blog-slider__text">实践中遇到的八阿哥汇总</div><a class="blog-slider__button" href="2022/07/07工具/工具_手册_Bug记录及解决/10d28195/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>